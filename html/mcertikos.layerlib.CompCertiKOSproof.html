<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>mcertikos.layerlib.CompCertiKOSproof</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library mcertikos.layerlib.CompCertiKOSproof</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coqlib</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Errors</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Integers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">AST</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Globalenvs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Events</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">SmallstepX</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="library">SeparateCompilerproof</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Decision</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MemWithData</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatData</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Stencil</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MakeProgram</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatLayers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatExternalCalls</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.I64Layer</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.logic.PTreeSemantics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatClightSem</span>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#"><span class="id" title="library">LAsmgenproof</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSem.html#"><span class="id" title="library">LAsmModuleSem</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#"><span class="id" title="library">CompCertiKOS</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">LiftValueAnalysis</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">LiftDeadcodeproof</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="lasm_sig_preserved"><span class="id" title="lemma">lasm_sig_preserved</span></a> <span class="id" title="var">f</span> <span class="id" title="var">tf</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_fundef"><span class="id" title="definition">LAsmgen.transf_fundef</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tf"><span class="id" title="variable">tf</span></a> →<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">fi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_sig"><span class="id" title="projection">LAsm.fn_sig</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tf"><span class="id" title="variable">tf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="projection">Asm.fn_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fi"><span class="id" title="variable">fi</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_function"><span class="id" title="definition">LAsmgen.transf_function</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="asm_sig_preserved"><span class="id" title="lemma">asm_sig_preserved</span></a> <span class="id" title="var">f</span> <span class="id" title="var">tf</span>:<br/>
&nbsp;&nbsp;<span class="id" title="definition">Asmgen.transf_fundef</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> (<span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tf"><span class="id" title="variable">tf</span></a>) →<br/>
&nbsp;&nbsp;<span class="id" title="projection">Asm.fn_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tf"><span class="id" title="variable">tf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">Mach.funsig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Errors.bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asmgen.transf_function</span> <span class="id" title="var">f</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">F</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asmgen.transf_function</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Errors.bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asmgen.transl_function</span> <span class="id" title="var">f</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">F</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zlt</span> <span class="id" title="definition">Int.max_unsigned</span> (<span class="id" title="definition">list_length_z</span> (<span class="id" title="projection">fn_code</span> <span class="id" title="var">f0</span>))); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asmgen.transl_function</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Errors.bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asmgen.transl_code&acute;</span> <span class="id" title="var">f</span> (<span class="id" title="projection">Mach.fn_code</span> <span class="id" title="var">f</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="transf_clight_function&acute;_sig_translated"><span class="id" title="lemma">transf_clight_function&acute;_sig_translated</span></a> <span class="id" title="var">fenv</span> <span class="id" title="var">f</span> <span class="id" title="var">tf</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_clight_function&acute;"><span class="id" title="definition">transf_clight_function&acute;</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tf"><span class="id" title="variable">tf</span></a> →  <br/>
&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_sig"><span class="id" title="projection">LAsm.fn_sig</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tf"><span class="id" title="variable">tf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">Ctypes.signature_of_type</span> (<span class="id" title="definition">Ctypes.type_of_params</span> (<span class="id" title="projection">Clight.fn_params</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a>)) (<span class="id" title="projection">Clight.fn_return</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a>) (<span class="id" title="projection">Clight.fn_callconv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">FUN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_clight_fundef_internal"><span class="id" title="lemma">transf_clight_fundef_internal</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">FUN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">FUN</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_clight_fundef&acute;"><span class="id" title="definition">transf_clight_fundef&acute;</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">SeparateCompiler.transf_clight_fundef&acute;</span>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">SeparateCompiler.transf_clight_fundef_to_rtl</span>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">SeparateCompiler.transf_rtl_fundef</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ComposePasses.compose_partial</span>, <span class="id" title="definition">ComposePasses.compose_total_right</span>, <span class="id" title="definition">ComposePasses.apply_total</span>, <span class="id" title="definition">ComposePasses.apply_partial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Cshmgen.transl_fundef</span> (<span class="id" title="constructor">Clight.Internal</span> <span class="id" title="var">f</span>)) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> (<span class="id" title="lemma">Cshmgenproof.transl_fundef_sig2</span> (<span class="id" title="constructor">Clight.Internal</span> <span class="id" title="var">f</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Cminorgen.transl_fundef</span> <span class="id" title="var">f0</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Cminorgenproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">SelectionX.sel_fundef</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- (<span class="id" title="lemma">Selectionproof.sig_function_translated</span> <span class="id" title="definition">I64helpers.hf</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)) <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="definition">SelectionX.sel_fundef</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">RTLgen.transl_fundef</span> (<span class="id" title="definition">SelectionX.sel_fundef</span> <span class="id" title="var">f1</span>)) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">RTLgenproof.sig_transl_function</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Tailcallproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Inlining.transf_fundef</span> <span class="id" title="var">fenv</span> (<span class="id" title="definition">Tailcall.transf_fundef</span> <span class="id" title="var">f2</span>)) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Inliningproof.sig_function_translated</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">Renumberproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ConstpropX.transf_fundef</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">Constpropproof.sig_function_translated</span> <span class="id" title="definition">ValueDomainX.rmtop</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="definition">ConstpropX.transf_fundef</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">Renumberproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">CSEX.transf_fundef</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">CSE.transf_fundef</span> <span class="id" title="definition">ValueDomainX.rmtop</span> (<span class="id" title="definition">Renumber.transf_fundef</span> (<span class="id" title="definition">ConstpropX.transf_fundef</span> (<span class="id" title="definition">Renumber.transf_fundef</span> <span class="id" title="var">f3</span>)))) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">CSEproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">DeadcodeX.transf_fundef</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Deadcode.transf_fundef</span> <span class="id" title="definition">ValueDomainX.rmtop</span> <span class="id" title="var">f4</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Deadcodeproof.sig_function_translated</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Allocation.transf_fundef</span> <span class="id" title="var">f5</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Allocproof.sig_function_translated</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Tunnelingproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Linearize.transf_fundef</span> (<span class="id" title="definition">Tunneling.tunnel_fundef</span> <span class="id" title="var">f6</span>)) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Linearizeproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">CleanupLabelsproof.sig_function_translated</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Stacking.transf_fundef</span> (<span class="id" title="definition">CleanupLabels.transf_fundef</span> <span class="id" title="var">f7</span>)) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">Stackingproof.sig_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SIG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asmgen.transf_fundef</span> <span class="id" title="var">f8</span>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#lasm_sig_preserved"><span class="id" title="lemma">lasm_sig_preserved</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">SIG&acute;</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#asm_sig_preserved"><span class="id" title="lemma">asm_sig_preserved</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="WITHKERNELMODE"><span class="id" title="section">WITHKERNELMODE</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">kernel_mode_prf</span>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#KernelMode"><span class="id" title="class">LAsmgenproof.KernelMode</span></a>}.<br/>

<br/>
</div>

<div class="doc">
We have to disable externals as builtins in the source <span class="inlinecode"><span class="id" title="var">Asm</span></span> code. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="WITHKERNELMODE.cc_ops"><span class="id" title="variable">cc_ops</span></a> : <span class="id" title="class">CompilerConfigOps</span> (<span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">cc_enable_external_as_builtin</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">cc_ops</span>.<br/>

<br/>
</div>

<div class="doc">
Remember that we are compiling Asm code, so the external
  functions must be compilable. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ec_prf</span>: !<span class="id" title="class">CompilerConfiguration</span> (<span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>)}.<br/>

<br/>
</div>

<div class="doc">
Requirement on the memory model to compose CompCertX 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">memory_model_x</span>: !<span class="id" title="class">Mem.MemoryModelX</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.mem"><span class="id" title="variable">mem</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Semantic requirement on external functions and builtins related to 64-bit integers 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">genv_valid</span>: <span class="id" title="class">SelectLongproofX.GenvValid</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">external_calls_i64_helpers</span>: !<span class="id" title="class">SelectLongproofX.ExternalCallI64Helpers</span> <span class="id" title="method">external_functions_sem</span> <span class="id" title="definition">I64helpers.hf</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">external_calls_i64_builtins</span>: !<span class="id" title="class">SelectLongproofX.ExternalCallI64Builtins</span> <span class="id" title="method">builtin_functions_sem</span> <span class="id" title="definition">I64helpers.hf</span>}.<br/>

<br/>
</div>

<div class="doc">
Requirements of value analysis (CSE, constant propagation, dead
      code elimination).  Those can be stated on the <span class="inlinecode"><span class="id" title="var">mem</span></span> base memory
      model, then <span class="inlinecode"><span class="id" title="var">ValueDomainWithData</span></span> will "lift" them to <span class="inlinecode"><span class="id" title="var">mwd</span></span> <span class="inlinecode"><span class="id" title="var">D</span></span>.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">mmatch_ops</span>: !<span class="id" title="class">ValueDomain.MMatchOps</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.mem"><span class="id" title="variable">mem</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">mmatch_constructions_prf</span>: !<span class="id" title="class">ValueAnalysis.MMatchConstructions</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.mem"><span class="id" title="variable">mem</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Requirements of dead code elimination.
      Those can be stated on the <span class="inlinecode"><span class="id" title="var">mem</span></span> base memory model, then <span class="inlinecode"><span class="id" title="var">LiftDeadcodeproof</span></span> will
      lift them to <span class="inlinecode"><span class="id" title="var">mwd</span></span> <span class="inlinecode"><span class="id" title="var">D</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">magree_ops</span>: !<span class="id" title="class">Deadcodeproof.MAgreeOps</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.mem"><span class="id" title="variable">mem</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">magree_prf</span>: !<span class="id" title="class">Deadcodeproof.MAgree</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.mem"><span class="id" title="variable">mem</span></a>}.<br/>

<br/>
</div>

<div class="doc">
These are necessary for Coq to find instances of !Deadcodeproof.MAgree  and also of !ValueAnalysis.MMatchConstructions 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">mwd_liftmem_ops</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">mwd_liftmem_prf</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="transf_clight_program_correct"><span class="id" title="lemma">transf_clight_program_correct</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">p</span> <span class="id" title="var">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">TRANSL_TO_RTL</span>: <span class="id" title="definition">SeparateCompiler.transf_clight_program_to_rtl</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p2"><span class="id" title="variable">p2</span></a>)<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
For Inlining, we need a parameter which contains functions to inline. We do not care here
      how it is computed, as long as it is sound with the intermediate representation p2.
      It can be very well instantiated with <span class="inlinecode"><span class="id" title="var">PTree.empty</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> to disable function inlining. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">fenv</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">FENV_COMPAT</span>: <span class="id" title="definition">Inliningspec.fenv_compat</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p2"><span class="id" title="variable">p2</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a>)<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="var">tp</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">TRANSL_TO_LASM</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_rtl_program"><span class="id" title="definition">transf_rtl_program</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p2"><span class="id" title="variable">p2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tp"><span class="id" title="variable">tp</span></a>)<br/>
&nbsp;&nbsp;,<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
Syntactic requirement on the Clight program: it has to contain declarations
      to external i64 helpers. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">ge_contains_helpers</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ClightI64helpers.genv_contains_helpers</span> <span class="id" title="definition">I64helpers.hf</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p"><span class="id" title="variable">p</span></a>)),<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">ge_valid</span>: <span class="id" title="method">SelectLongproofX.genv_valid</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p"><span class="id" title="variable">p</span></a>)),<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) (<span class="id" title="var">init_asm_rs</span>: <span class="id" title="definition">Asm.regset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ASM_INVARIANT</span>: <span class="id" title="record">AsmX.asm_invariant</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tp"><span class="id" title="variable">tp</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
requirement by LAsm 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">kernel_mode</span>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">LAsmgenproof.kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>))<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Arguments and so on, given by the local condition on Asm external call 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">args</span> <span class="id" title="var">sg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">EXTCALL_ARGS</span>: <span class="id" title="definition">Asm.extcall_arguments</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">INIT_SP_NOT_GLOBAL</span>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">b</span> : <span class="id" title="definition">Values.block</span>) (<span class="id" title="var">o</span> : <span class="id" title="record">Integers.Int.int</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Values.Vptr</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Ple</span> (<span class="id" title="projection">Genv.genv_next</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tp"><span class="id" title="variable">tp</span></a>)) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hsymb</span>:  <span class="id" title="definition">Genv.find_symbol</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tp"><span class="id" title="variable">tp</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">PC_VAL</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> <span class="id" title="constructor">Asm.PC</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Values.Vptr</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="definition">Integers.Int.zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SP_NOT_VUNDEF</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="constructor">Vundef</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RA_NOT_VUNDEF</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> <span class="id" title="constructor">Asm.RA</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="constructor">Vundef</span>)<br/>
&nbsp;&nbsp;,<br/>
&nbsp;&nbsp;<span class="id" title="record">forward_simulation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">semantics_as_asm</span> (<span class="id" title="definition">ClightX.csemantics</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">semantics_with_inject</span> (<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.semantics"><span class="id" title="definition">LAsmgenproof.PFLAsm.semantics</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#init_asm_rs"><span class="id" title="variable">init_asm_rs</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#tp"><span class="id" title="variable">tp</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_rtl_program"><span class="id" title="definition">transf_rtl_program</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">TRANSL_TO_LASM</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">TRANSL_TO_LASM</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">SeparateCompiler.transf_rtl_program</span> <span class="id" title="var">fenv</span> <span class="id" title="var">p2</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">TRANSL_TO_ASM</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">TRANSL_TO_LASM</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">TRANSL_TO_LASM</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">compose_forward_simulation</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">SeparateCompilerproof.transf_clight_program_correct</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ASM_INVARIANT</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">inv_inject_neutral</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#genv_next_preserved"><span class="id" title="lemma">LAsmgenproof.genv_next_preserved</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">inv_mem_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#genv_next_preserved"><span class="id" title="lemma">LAsmgenproof.genv_next_preserved</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">LAsmgenproof.symbols_preserved</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">forward_simulation_extends_inject</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">forward_simulation_extends</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#transf_program_correct"><span class="id" title="lemma">LAsmgenproof.transf_program_correct</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHKERNELMODE"><span class="id" title="section">WITHKERNELMODE</span></a>.<br/>

<br/>
</div>

<div class="doc">
How to convert CompCertiKOS' correctness statement into the new framework. 
<div class="paragraph"> </div>

 How to instantiate kernel mode. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="WITHLAYER"><span class="id" title="section">WITHLAYER</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hstencil</span>: <span class="id" title="class">Stencil.Stencil</span>}.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmem</span>: <span class="id" title="class">Mem.MemoryModel</span>}.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmwd</span>: <span class="id" title="class">UseMemWithData</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.mem"><span class="id" title="variable">mem</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Context</span> {<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>}.<br/>

<br/>
<span class="id" title="keyword">Variable</span> (<a name="WITHLAYER.L"><span class="id" title="variable">L</span></a>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.D"><span class="id" title="variable">D</span></a>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="KMOPS"><span class="id" title="instance">KMOPS</span></a>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#KernelModeOps"><span class="id" title="class">LAsmgenproof.KernelModeOps</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.D"><span class="id" title="variable">D</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="method">kernel_mode</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">extcall_invariants_defined</span>: !<span class="id" title="class">ExtcallInvariantsDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.L"><span class="id" title="variable">L</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">acc_def_prf</span>: !<a class="idref" href="mcertikos.layerlib.LAsm.html#AccessorsDefined"><span class="id" title="class">LAsm.AccessorsDefined</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.L"><span class="id" title="variable">L</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="KM"><span class="id" title="instance">KM</span></a>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#KernelMode"><span class="id" title="class">LAsmgenproof.KernelMode</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.D"><span class="id" title="variable">D</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ec_ops_x</span> := <span class="id" title="instance">compatlayer_extcall_ops_x</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.L"><span class="id" title="variable">L</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">lc_ops</span>   := <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#LC"><span class="id" title="instance">LAsmModuleSemDef.LC</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.L"><span class="id" title="variable">L</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#acc_exec_load"><span class="id" title="definition">LAsm.acc_exec_load</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsm.html#acc_exec_load_strong"><span class="id" title="definition">LAsm.acc_exec_load_strong</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.L"><span class="id" title="variable">L</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="method">exec_load_kernel_mode</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#acc_exec_store"><span class="id" title="definition">LAsm.acc_exec_store</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsm.html#acc_exec_store_strong"><span class="id" title="definition">LAsm.acc_exec_store_strong</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.L"><span class="id" title="variable">L</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="method">exec_store_kernel_mode</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">m&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (σ &amp; <span class="id" title="var">Hget</span> &amp; <span class="id" title="var">s</span> &amp; σ<span class="id" title="var">f</span> &amp; <span class="id" title="var">Hmatch</span> &amp; <span class="id" title="var">Hsem</span> &amp; ? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER.extcall_invariants_defined"><span class="id" title="variable">extcall_invariants_defined</span></a> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="projection">sextcall_invs</span> <span class="id" title="var">_</span> σ<span class="id" title="var">f</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">m&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">external_call_kernel_mode</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WITHLAYER"><span class="id" title="section">WITHLAYER</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now we define compiler correctness in the new framework. We start
by defining a relationship between a C-style primitive (sextcall) and
an Asm-style primitive (sprimcall) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="SIMULATION"><span class="id" title="section">SIMULATION</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hstencil</span>: <span class="id" title="class">Stencil.Stencil</span>}.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmemx</span>: <span class="id" title="class">Mem.MemoryModelX</span>}.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmwd</span>: <span class="id" title="class">UseMemWithData</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#SIMULATION.mem"><span class="id" title="variable">mem</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="compiler_primsim"><span class="id" title="inductive">compiler_primsim</span></a> {<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>}: <span class="id" title="definition">compatsem</span> <span class="id" title="var">D</span> → <span class="id" title="definition">compatsem</span> <span class="id" title="var">D</span> → <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="compiler_primsim_intro"><span class="id" title="constructor">compiler_primsim_intro</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem1</span>: <span class="id" title="record">sextcall_primsem</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem2</span>: <span class="id" title="record">sprimcall_primsem</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span>: <span class="id" title="definition">ident</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">NAME</span>: <span class="id" title="projection">sprimcall_name</span> <span class="id" title="var">D</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">VALID</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sprimcall_valid</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_valid</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SIG</span>: <span class="id" title="projection">sprimcall_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">sextcall_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">INV</span>: <span class="id" title="definition">isError</span> (<span class="id" title="projection">sprimcall_invs</span> <span class="id" title="var">D</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">COMPILER_PRIMSIM</span>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <span class="id" title="var">D</span>) (<span class="id" title="var">rs</span>: <span class="id" title="definition">Asm.regset</span>) (<span class="id" title="var">args</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">val</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">res</span>: <span class="id" title="inductive">val</span>) (<span class="id" title="var">m&acute;_clight</span>: <span class="id" title="definition">mwd</span> <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#SIMULATION.stencil"><span class="id" title="variable">stencil</span></a>) (<span class="id" title="var">b</span>: <span class="id" title="definition">block</span>) (<span class="id" title="var">WB</span>: <span class="id" title="definition">block</span> → <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ARGS</span>: <span class="id" title="definition">extcall_arguments</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> (<span class="id" title="definition">sextcall_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SYMB</span>: <span class="id" title="method">find_symbol</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">PC</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <span class="id" title="constructor">PC</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Vptr</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="definition">Int.zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">KERNEL_MODE</span>: <span class="id" title="method">kernel_mode</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ASM_INVARIANT</span>: <span class="id" title="record">asm_invariant</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SP_NOT_VUNDEF</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="constructor">Vundef</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">RA_NOT_VUNDEF</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <span class="id" title="constructor">Asm.RA</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="constructor">Vundef</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">INIT_SP_NOT_GLOBAL</span>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">b</span> : <span class="id" title="definition">Values.block</span>) (<span class="id" title="var">o</span> : <span class="id" title="record">Integers.Int.int</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Values.Vptr</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Ple</span> (<span class="id" title="method">genv_next</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SEM1</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> (<span class="id" title="definition">decode_longs</span> (<span class="id" title="projection">sig_args</span> (<span class="id" title="definition">sextcall_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>)) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;_clight"><span class="id" title="variable">m&acute;_clight</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">VALID</span>: <span class="id" title="projection">sprimcall_valid</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
The following condition is needed to compose with <span class="inlinecode"><span class="id" title="var">CompatClightSem.primitive_le</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">HIGH</span>: <span class="id" title="method">high_level_invariant</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">j</span> <span class="id" title="var">rs&acute;</span> <span class="id" title="var">m&acute;_lasm</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sprimcall_step</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;_lasm"><span class="id" title="variable">m&acute;_lasm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">Mem.inject</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;_clight"><span class="id" title="variable">m&acute;_clight</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;_lasm"><span class="id" title="variable">m&acute;_lasm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">inject_incr</span> (<span class="id" title="definition">Mem.flat_inj</span> (<span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">inject_separated</span> (<span class="id" title="definition">Mem.flat_inj</span> (<span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">val_list_inject</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#j"><span class="id" title="variable">j</span></a> (<span class="id" title="definition">encode_long</span> (<span class="id" title="projection">sig_res</span> (<span class="id" title="definition">sextcall_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>)) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> (<span class="id" title="definition">loc_external_result</span> (<span class="id" title="definition">sextcall_sig</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>))) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="definition">Conventions1.destroyed_at_call</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">Val.lessdef</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> (<span class="id" title="definition">preg_of</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#r"><span class="id" title="variable">r</span></a>)) (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> (<span class="id" title="definition">preg_of</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#r"><span class="id" title="variable">r</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">Val.lessdef</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <span class="id" title="constructor">RA</span>) (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <span class="id" title="constructor">Asm.PC</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">Val.lessdef</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs"><span class="id" title="variable">rs</span></a> <span class="id" title="constructor">ESP</span>) (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <span class="id" title="constructor">ESP</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_primsim"><span class="id" title="inductive">compiler_primsim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>).<br/>

<br/>
<span class="id" title="keyword">Remark</span> <a name="ple_prop_intro"><span class="id" title="lemma">ple_prop_intro</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="definition">Plt</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n1"><span class="id" title="variable">n1</span></a> → <span class="id" title="definition">Plt</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n2"><span class="id" title="variable">n2</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Ple</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n1"><span class="id" title="variable">n1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n2"><span class="id" title="variable">n2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">peq</span> <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Numbers.BinNums.html#xH"><span class="id" title="constructor">xH</span></a>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.PArith.BinPos.html#Psucc_pred"><span class="id" title="abbreviation">Psucc_pred</span></a> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> (<span class="id" title="var">H</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.PArith.BinPos.html#Pos.pred"><span class="id" title="definition">Pos.pred</span></a> <span class="id" title="var">n1</span>) <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="var">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">xomega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Remark</span> <a name="inject_incr_le"><span class="id" title="lemma">inject_incr_le</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Ple</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n1"><span class="id" title="variable">n1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n2"><span class="id" title="variable">n2</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">inject_incr</span> (<span class="id" title="definition">Mem.flat_inj</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n1"><span class="id" title="variable">n1</span></a>) (<span class="id" title="definition">Mem.flat_inj</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#n2"><span class="id" title="variable">n2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">inject_incr</span>, <span class="id" title="definition">Mem.flat_inj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">plt</span> <span class="id" title="var">b</span> <span class="id" title="var">n1</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">plt</span> <span class="id" title="var">b</span> <span class="id" title="var">n2</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">xomega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="compatsim_compiler_primsim_compose"><span class="id" title="lemma">compatsim_compiler_primsim_compose</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D0</span> <span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R</span>: <span class="id" title="class">compatrel</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D0"><span class="id" title="variable">D0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem0</span>: <span class="id" title="definition">compatsem</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D0"><span class="id" title="variable">D0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem1</span> <span class="id" title="var">sem2</span>: <span class="id" title="definition">compatsem</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SIM01</span>: <span class="id" title="definition">compatsim</span> (<span class="id" title="constructor">freerg_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem0"><span class="id" title="variable">sem0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">NEXTBLOCK</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">s1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">WB</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_step</span> <span class="id" title="var">s1</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> → <span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">KERNEL_MODE</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">s1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">WB</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_step</span> <span class="id" title="var">s1</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> → <span class="id" title="method">kernel_mode</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SIM12</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_primsim"><span class="id" title="inductive">compiler_primsim</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>)<br/>
&nbsp;&nbsp;,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">compatsim</span> (<span class="id" title="constructor">freerg_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem0"><span class="id" title="variable">sem0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 4; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">SIM01</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">sextcall_sim_valid</span> <span class="id" title="var">into</span> <span class="id" title="var">VALID&acute;</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">esplit</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> <span class="id" title="var">sextcall_sim_step</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">decode_longs_inject</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">f&acute;</span> &amp; <span class="id" title="var">vres2</span> &amp; <span class="id" title="var">m2&acute;</span> &amp; <span class="id" title="var">d2&acute;</span> &amp; <span class="id" title="var">SEM3</span> &amp; <span class="id" title="var">VRESINJ</span> &amp; <span class="id" title="var">MATCHEXTCALL&acute;</span> &amp; <span class="id" title="var">INCR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">SIG_EQ</span>: <span class="id" title="definition">sextcall_sig</span> <span class="id" title="var">sem1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">sextcall_sig</span> <span class="id" title="var">sem3</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">unfold</span> <span class="id" title="definition">sextcall_sig</span>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> <span class="id" title="var">COMPILER_PRIMSIM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">SIG_EQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">SIG_EQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">j</span> &amp; <span class="id" title="var">rs&acute;</span> &amp; <span class="id" title="var">m&acute;_lasm</span> &amp; <span class="id" title="var">SEM4</span> &amp; <span class="id" title="var">INJ_J</span> &amp; <span class="id" title="var">INJ_INCR</span> &amp; <span class="id" title="var">INJ_SEP</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp; <span class="id" title="var">VRES2INJ</span> &amp; <span class="id" title="var">CALLEE_SAVE</span> &amp; <span class="id" title="var">PC_LESS</span> &amp; <span class="id" title="var">ESP_LESS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NB</span>: <span class="id" title="method">Mem.nextblock</span> <span class="id" title="var">m2&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">Mem.nextblock</span> <span class="id" title="var">m2</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">NEXTBLOCK</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">SEM3</span>). <span class="id" title="tactic">clear</span>. <span class="id" title="var">lift_unfold</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">COMPOSE</span>: <span class="id" title="definition">compose_meminj</span> <span class="id" title="var">f&acute;</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">f&acute;</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">FunctionalExtensionality.functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">compose_meminj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f&acute;</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [ [<span class="id" title="var">y</span> <span class="id" title="keyword">delta</span>] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqx</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> <span class="id" title="method">Mem.valid_block_inject_2</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="method">match_inject</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">Mem.valid_block</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">NB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">j</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> 0%<span class="id" title="var">Z</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">INJ_INCR</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">Mem.flat_inj</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">plt</span> <span class="id" title="var">y</span> (<span class="id" title="method">Mem.nextblock</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">m2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">d2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlt</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlt</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">clear</span>. <span class="id" title="var">lift_unfold</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m&acute;_lasm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m&acute;_lasm</span> <span class="id" title="var">d&acute;_lasm</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">INJ_J&acute;</span>: <span class="id" title="method">Mem.inject</span> <span class="id" title="var">j</span> <span class="id" title="var">m2&acute;</span> <span class="id" title="var">m&acute;_lasm</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <span class="id" title="var">d2&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">d&acute;_lasm</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">INJ_J</span>. <span class="id" title="tactic">clear</span>. <span class="id" title="var">lift_unfold</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">INJ_J&acute;</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">INJ_J&acute;</span> ?]; <span class="id" title="tactic">subst</span> <span class="id" title="var">d2&acute;</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">f&acute;</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">rs&acute;</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">m&acute;_lasm</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">d&acute;_lasm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MATCHEXTCALL&acute;</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">COMPOSE</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="method">Mem.inject_compose</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">COMPOSE</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="method">match_compose</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">inject_incr_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#inject_incr_le"><span class="id" title="lemma">inject_incr_le</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">COMPOSE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ASM_INV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">inv_inject_neutral</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ple_prop_intro"><span class="id" title="lemma">ple_prop_intro</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">Plt</span> <span class="id" title="var">n</span> (<span class="id" title="method">Mem.nextblock</span> <span class="id" title="var">m2&acute;</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#SIMULATION.Hmemx"><span class="id" title="variable">Hmemx</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#SIMULATION.Hmwd"><span class="id" title="variable">Hmwd</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">INJ_J&acute;</span> <span class="id" title="var">INJ_INCR</span> <span class="id" title="var">NB</span>. <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_unfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">NB</span> <span class="id" title="keyword">in</span> <span class="id" title="var">INJ_INCR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">j</span> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> 0%<span class="id" title="var">Z</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">INJ_INCR</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">Mem.flat_inj</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">plt</span> <span class="id" title="var">n</span> (<span class="id" title="method">Mem.nextblock</span> <span class="id" title="var">m2&acute;</span>)); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">Mem.valid_block_inject_2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">COMPOSE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="method">SmallstepX.val_inject_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">val_list_inject_incr</span>. <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">f</span>). <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">encode_long_inject</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">SIG_EQ</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <span class="id" title="definition">sextcall_sig</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">INV</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">err</span> <span class="id" title="var">Hinvs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We finally define compiler simulation at the level of layers. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> {<span class="id" title="var">D</span>}:<br/>
&nbsp;&nbsp;<span class="id" title="inductive">res</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<span class="id" title="definition">compatsem</span> <span class="id" title="var">D</span>)) → <span class="id" title="inductive">res</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<span class="id" title="definition">compatsem</span> <span class="id" title="var">D</span>)) → <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="compiler_defsim_some"><span class="id" title="constructor">compiler_defsim_some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sem1</span> <span class="id" title="var">sem2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hsem</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_primsim"><span class="id" title="inductive">compiler_primsim</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> (<span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a>)) (<span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>))<br/>
| <a name="compiler_defsim_none"><span class="id" title="constructor">compiler_defsim_none</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> (<span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#p"><span class="id" title="variable">p</span></a><br/>
.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="res_option_sim_compatsim_compiler_defsim_compose"><span class="id" title="lemma">res_option_sim_compatsim_compiler_defsim_compose</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">D0</span> <span class="id" title="var">D</span> (<span class="id" title="var">R</span>: <span class="id" title="class">compatrel</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D0"><span class="id" title="variable">D0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">sem0</span> <span class="id" title="var">sem1</span> <span class="id" title="var">sem2</span>:<br/>
&nbsp;<span class="id" title="inductive">res_le</span> (<span class="id" title="inductive">option_le</span> (<span class="id" title="definition">compatsim</span> (<span class="id" title="constructor">freerg_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#R"><span class="id" title="variable">R</span></a>))) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem0"><span class="id" title="variable">sem0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> →<br/>
&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> →<br/>
&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">s1</span>)) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">WB</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_step</span> <span class="id" title="var">s1</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> → <span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;<span class="id" title="keyword">end</span> →<br/>
&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">KERNEL_MODE</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">s1</span>)) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">WB</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_step</span> <span class="id" title="var">s1</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> → <span class="id" title="method">kernel_mode</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>),<br/>
&nbsp;<span class="id" title="inductive">res_le</span> (<span class="id" title="inductive">option_le</span> (<span class="id" title="definition">compatsim</span> (<span class="id" title="constructor">freerg_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#R"><span class="id" title="variable">R</span></a>))) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem0"><span class="id" title="variable">sem0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 2; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_monotonic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compatsim_compiler_primsim_compose"><span class="id" title="lemma">compatsim_compiler_primsim_compose</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">sem2</span>; <span class="id" title="var">solve_monotonic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a name="compiler_layersim"><span class="id" title="record">compiler_layersim</span></a> {<span class="id" title="var">D</span>} (<span class="id" title="var">L1</span> <span class="id" title="var">L2</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="compiler_layersim_primitives"><span class="id" title="projection">compiler_layersim_primitives</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> (<span class="id" title="method">get_layer_primitive</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a>) (<span class="id" title="method">get_layer_primitive</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="compiler_layersim_globalvars"><span class="id" title="projection">compiler_layersim_globalvars</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">res_le</span> (<span class="id" title="inductive">option_le</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (<span class="id" title="method">get_layer_globalvar</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a>) (<span class="id" title="method">get_layer_globalvar</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="compiler_layersim_load"><span class="id" title="projection">compiler_layersim_load</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">res_le</span> (<span class="id" title="inductive">option_le</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (<span class="id" title="projection">cl_exec_load</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a>) (<span class="id" title="projection">cl_exec_load</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="compiler_layersim_store"><span class="id" title="projection">compiler_layersim_store</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">res_le</span> (<span class="id" title="inductive">option_le</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (<span class="id" title="projection">cl_exec_store</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a>) (<span class="id" title="projection">cl_exec_store</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="cl_sim_compiler_layersim_compose"><span class="id" title="lemma">cl_sim_compiler_layersim_compose</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D0</span> <span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">R</span>: <span class="id" title="class">compatrel</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D0"><span class="id" title="variable">D0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">L0</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D0"><span class="id" title="variable">D0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">L1</span> <span class="id" title="var">L2</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SIM01</span>: <span class="id" title="record">cl_sim</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="constructor">freerg_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L0"><span class="id" title="variable">L0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">NEXTBLOCK</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">get_layer_primitive</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">compatsem_inl</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s1"><span class="id" title="variable">s1</span></a>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">WB</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_step</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> → <span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">Mem.nextblock</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">KERNEL_MODE</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">get_layer_primitive</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">compatsem_inl</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s1"><span class="id" title="variable">s1</span></a>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">WB</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">sextcall_step</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> → <span class="id" title="method">kernel_mode</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">SIM12</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_layersim"><span class="id" title="record">compiler_layersim</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a>)<br/>
&nbsp;&nbsp;,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="record">cl_sim</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="constructor">freerg_inj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L0"><span class="id" title="variable">L0</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">cl_sim_layer_pointwise</span> <span class="id" title="keyword">in</span> <span class="id" title="var">cl_sim_layer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cl_sim_layer</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cl_sim_layer_prim</span> <span class="id" title="var">cl_sim_layer_var</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cl_sim_layer_pointwise</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res_option_sim_compatsim_compiler_defsim_compose"><span class="id" title="lemma">res_option_sim_compatsim_compiler_defsim_compose</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_layersim_primitives"><span class="id" title="projection">compiler_layersim_primitives</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">get_layer_primitive</span> <span class="id" title="var">i</span> <span class="id" title="var">L1</span>) <span class="id" title="keyword">as</span> [ [ [ | ] | ] | ] <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">get_layer_primitive</span> <span class="id" title="var">i</span> <span class="id" title="var">L1</span>) <span class="id" title="keyword">as</span> [ [ [ | ] | ] | ] <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_layersim_globalvars"><span class="id" title="projection">compiler_layersim_globalvars</span></a>.<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">SIM12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">compiler_layersim_load0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> <span class="id" title="var">cl_sim_load</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">cl_sim_load</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_monotonic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_monotonic</span>.<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">SIM12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">compiler_layersim_store0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> <span class="id" title="var">cl_sim_store</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">cl_sim_store</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_monotonic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_monotonic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We now prove that <span class="inlinecode"><span class="id" title="var">compiler_primsim</span></span> can "absorb"
<span class="inlinecode"><span class="id" title="var">CompatClightSem.primitive_le</span></span> on its left. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="compiler_defsim_primitive_le_compose"><span class="id" title="lemma">compiler_defsim_primitive_le_compose</span></a> {<span class="id" title="var">D</span>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">sem1</span> <span class="id" title="var">sem2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">res_le</span> (<span class="id" title="inductive">option_le</span> <span class="id" title="inductive">primitive_le</span>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">sem3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem2"><span class="id" title="variable">sem2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem3"><span class="id" title="variable">sem3</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim"><span class="id" title="inductive">compiler_defsim</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem1"><span class="id" title="variable">sem1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#sem3"><span class="id" title="variable">sem3</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> σ1 σ2 <span class="id" title="var">H</span>σ12 σ3 <span class="id" title="var">H</span>σ23.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>σ12 <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">_</span> [σ2 | σ1 σ2 <span class="id" title="var">H</span>σ12] | <span class="id" title="var">msg</span> σ1];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>σ23 <span class="id" title="keyword">as</span> [σ2&acute; σ3&acute; <span class="id" title="var">H</span>σ23&acute; | σ2&acute;]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>σ23;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>σ12 <span class="id" title="keyword">as</span> [σ1 σ2 <span class="id" title="var">Hvalid12</span> <span class="id" title="var">Hsig12</span> <span class="id" title="var">Hsem12</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>σ23&acute; <span class="id" title="keyword">as</span> [σ2&acute; σ3 <span class="id" title="var">H</span>σ23 <span class="id" title="var">Hname23</span> <span class="id" title="var">Hvalid23</span> <span class="id" title="var">Hstep23</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hsig12</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="compiler_layersim_spec_le_compose"><span class="id" title="lemma">compiler_layersim_spec_le_compose</span></a> {<span class="id" title="var">D</span>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">L1</span> <span class="id" title="var">L2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="record">spec_le</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">L3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_layersim"><span class="id" title="record">compiler_layersim</span></a> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L2"><span class="id" title="variable">L2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L3"><span class="id" title="variable">L3</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_layersim"><span class="id" title="record">compiler_layersim</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L1"><span class="id" title="variable">L1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L3"><span class="id" title="variable">L3</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_defsim_primitive_le_compose"><span class="id" title="lemma">compiler_defsim_primitive_le_compose</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#SIMULATION"><span class="id" title="section">SIMULATION</span></a>.<br/>

<br/>
</div>

<div class="doc">
Missing lemma from Smallstep 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="star_plus"><span class="id" title="lemma">star_plus</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">genv</span> <span class="id" title="var">state</span>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">step</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#genv"><span class="id" title="variable">genv</span></a> → <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#state"><span class="id" title="variable">state</span></a> → <span class="id" title="definition">trace</span> → <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#state"><span class="id" title="variable">state</span></a> → <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ge</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">s&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">star</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">plus</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s&acute;"><span class="id" title="variable">s&acute;</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Compiler correctness in terms of layers 
<div class="paragraph"> </div>

 We bundle all operations needed for compiler correctness, and the
specifications whose proofs depend on the implementation of
<span class="inlinecode"><span class="id" title="var">MakeProgram</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="CompCertiKOSOps"><span class="id" title="record">CompCertiKOSOps</span></a>: <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="stencil"><span class="id" title="projection">stencil</span></a>: <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="stencil_ops"><span class="id" title="projection">stencil_ops</span></a> :&gt; <span class="id" title="class">StencilOps</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#stencil"><span class="id" title="method">stencil</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mem"><span class="id" title="projection">mem</span></a>: <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="memory_model_ops"><span class="id" title="projection">memory_model_ops</span></a> :&gt; <span class="id" title="class">Mem.MemoryModelOps</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mwd_ops"><span class="id" title="projection">mwd_ops</span></a> :&gt; <span class="id" title="class">UseMemWithData</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="clight_make_program_ops"><span class="id" title="projection">clight_make_program_ops</span></a> :&gt; <span class="id" title="class">MakeProgramOps</span> <span class="id" title="record">Clight.function</span> <span class="id" title="inductive">Ctypes.type</span> <span class="id" title="inductive">Clight.fundef</span> <span class="id" title="inductive">Ctypes.type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="lasm_make_program_ops"><span class="id" title="projection">lasm_make_program_ops</span></a> :&gt; <span class="id" title="class">MakeProgramOps</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">LAsm.function</span></a> <span class="id" title="inductive">Ctypes.type</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">LAsm.fundef</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mmatch_ops"><span class="id" title="projection">mmatch_ops</span></a> :&gt; <span class="id" title="class">ValueDomain.MMatchOps</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="magree_ops"><span class="id" title="projection">magree_ops</span></a> :&gt; <span class="id" title="class">Deadcodeproof.MAgreeOps</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="CompCertiKOS"><span class="id" title="record">CompCertiKOS</span></a> `{<span class="id" title="var">compcertikos_ops</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CompCertiKOSOps"><span class="id" title="class">CompCertiKOSOps</span></a>}: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="stencil_prf"><span class="id" title="projection">stencil_prf</span></a> :&gt; <span class="id" title="class">Stencil</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#stencil"><span class="id" title="method">stencil</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="memory_model_x_prf"><span class="id" title="projection">memory_model_x_prf</span></a> :&gt; <span class="id" title="class">Mem.MemoryModelX</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="clight_make_program_prf"><span class="id" title="projection">clight_make_program_prf</span></a> :&gt; <span class="id" title="class">MakeProgram</span> <span class="id" title="record">Clight.function</span> <span class="id" title="inductive">Ctypes.type</span> <span class="id" title="inductive">Clight.fundef</span> <span class="id" title="inductive">Ctypes.type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="lasm_make_program_prf"><span class="id" title="projection">lasm_make_program_prf</span></a> :&gt; <span class="id" title="class">MakeProgram</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">LAsm.function</span></a> <span class="id" title="inductive">Ctypes.type</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">LAsm.fundef</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mmatch_constructions_prf"><span class="id" title="projection">mmatch_constructions_prf</span></a> :&gt; <span class="id" title="class">ValueAnalysis.MMatchConstructions</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="magree_prf"><span class="id" title="projection">magree_prf</span></a> :&gt; <span class="id" title="class">Deadcodeproof.MAgree</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#mem"><span class="id" title="method">mem</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="builtin_idents_norepet_prf"><span class="id" title="projection">builtin_idents_norepet_prf</span></a> :&gt; <span class="id" title="class">CompCertBuiltins.BuiltinIdentsNorepet</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Additional properties needed by <span class="inlinecode"><span class="id" title="var">make_program</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_transf_module_recip"><span class="id" title="projection">make_program_transf_module_recip</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_module"><span class="id" title="definition">transf_module</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">D</span> <span class="id" title="var">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">isOK</span> (<span class="id" title="method">make_program</span> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">isOK</span> (<span class="id" title="method">make_program</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_transf_module"><span class="id" title="projection">make_program_transf_module</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_module"><span class="id" title="definition">transf_module</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">D</span> <span class="id" title="var">L</span> <span class="id" title="var">x</span> <span class="id" title="var">x_lasm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_program</span> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x"><span class="id" title="variable">x</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_program</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_lasm"><span class="id" title="variable">x_lasm</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">x_rtl</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">SeparateCompiler.transf_clight_program_to_rtl</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_rtl"><span class="id" title="variable">x_rtl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">fenv</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Inliningspec.fenv_compat</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_rtl"><span class="id" title="variable">x_rtl</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_rtl_program"><span class="id" title="definition">CompCertiKOS.transf_rtl_program</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_rtl"><span class="id" title="variable">x_rtl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_lasm"><span class="id" title="variable">x_lasm</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Remark</span> <a name="res_le_ge"><span class="id" title="lemma">res_le_ge</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">F</span> <span class="id" title="var">V</span>} (<span class="id" title="var">ge</span>: <span class="id" title="record">Genv.t</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="var">oge1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">res_le</span> <span class="id" title="notation">(≤)</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#oge1"><span class="id" title="variable">oge1</span></a> (<span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ge"><span class="id" title="variable">ge</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">ge1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#oge1"><span class="id" title="variable">oge1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ge1"><span class="id" title="variable">ge1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ge1"><span class="id" title="variable">ge1</span></a> <span class="id" title="notation">≤</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#ge"><span class="id" title="variable">ge</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="make_program_l64"><span class="id" title="lemma">make_program_l64</span></a> `{<span class="id" title="var">compcertikos_prf</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CompCertiKOS"><span class="id" title="class">CompCertiKOS</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">M</span>: <span class="id" title="definition">ClightModules.cmodule</span>) <span class="id" title="var">s</span> <span class="id" title="var">D</span> <span class="id" title="var">L</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_program</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x"><span class="id" title="variable">x</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">L64</span> <span class="id" title="notation">≤</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ClightI64helpers.genv_contains_helpers</span> <span class="id" title="definition">I64helpers.hf</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x"><span class="id" title="variable">x</span></a>)<br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">t</span> <span class="id" title="var">Heq</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hle</span> := <span class="id" title="tactic">fresh</span> "Hle" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">Heq</span> | <span class="id" title="var">Hle</span> ] ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">inv</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="var">now</span> <span class="id" title="tactic">eauto</span> 7 | ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="var">Hle</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">L64</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <span class="id" title="definition">I64helpers.hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ClightI64helpers.genv_contains_helpers</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="lemma">make_program_make_globalenv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ge</span> <span class="id" title="var">Hge</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HM</span>: <span class="id" title="var">M</span> <span class="id" title="notation">≤</span> <span class="id" title="var">M</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="instance">make_globalenv_monotonic</span> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HM</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hge1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hge</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hge1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hge</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#res_le_ge"><span class="id" title="lemma">res_le_ge</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hge1</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">Hge1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">ge1</span> &amp; <span class="id" title="var">Hge1</span> &amp; <span class="id" title="var">Hge1le</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="lemma">make_globalenv_split_module_layer</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hge1</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">Hge1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">geL</span> &amp; <span class="id" title="var">_</span> &amp; (<span class="id" title="var">HgeL</span> &amp; <span class="id" title="var">HgeLle&acute;</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HgeLle</span>: <span class="id" title="var">geL</span> <span class="id" title="notation">≤</span> <span class="id" title="var">ge</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">etransitivity</span>; <span class="id" title="var">eassumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">M</span> <span class="id" title="var">HM</span> <span class="id" title="var">ge1</span> <span class="id" title="var">Hge1le</span> <span class="id" title="var">HgeLle&acute;</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv_make_globalenv_split_layer</span> <span class="id" title="var">inv_make_globalenv_leaftac</span> <span class="id" title="var">HgeL</span> <span class="id" title="var">HgeLle</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">sg</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="var">Hle</span>.<br/>
<span class="id" title="keyword">Qed</span>. 
<br/>
</div>

<div class="doc">
XXX: Not sure whether the following bundle is convenient 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="LayerCompilable"><span class="id" title="record">LayerCompilable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">compcertikos_ops</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CompCertiKOSOps"><span class="id" title="class">CompCertiKOSOps</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">L</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>)<br/>
: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="extcall_invariants_defined_prf"><span class="id" title="projection">extcall_invariants_defined_prf</span></a> :&gt; <span class="id" title="class">ExtcallInvariantsDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="acc_def_prf"><span class="id" title="projection">acc_def_prf</span></a> :&gt; <a class="idref" href="mcertikos.layerlib.LAsm.html#AccessorsDefined"><span class="id" title="class">LAsm.AccessorsDefined</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="layer_ok_prf"><span class="id" title="projection">layer_ok_prf</span></a> :&gt; <span class="id" title="class">LayerOK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="external_calls_x_defined"><span class="id" title="projection">external_calls_x_defined</span></a> :&gt; <span class="id" title="class">ExternalCallsXDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="layer_compilable_dec"><span class="id" title="instance">layer_compilable_dec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">compcertikos_ops</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CompCertiKOSOps"><span class="id" title="class">CompCertiKOSOps</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">L</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#D"><span class="id" title="variable">D</span></a>)<br/>
: <span class="id" title="class">Decision</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#LayerCompilable"><span class="id" title="class">LayerCompilable</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#L"><span class="id" title="variable">L</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="instance">extcall_invariants_defined_dec</span> <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsm.html#accessors_defined"><span class="id" title="definition">LAsm.accessors_defined</span></a> <span class="id" title="var">L</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hacc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">LayerOK</span> <span class="id" title="var">L</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="instance">external_calls_x_defined_dec</span> <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">left</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">ABS</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">ABS</span>; <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">ABS</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">ABS</span>; <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">ABS</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">ABS</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">acc_def_prf0</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">ABS</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">ABS</span>; <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="CORRECTNESS"><span class="id" title="section">CORRECTNESS</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">layer_compilable_prf</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#LayerCompilable"><span class="id" title="class">LayerCompilable</span></a>}.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">compcertikos_prf</span>: !<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CompCertiKOS"><span class="id" title="class">CompCertiKOS</span></a>}.<br/>

<br/>
</div>

<div class="doc">
The following two are needed to use <span class="inlinecode"><span class="id" title="var">compat_semantics_spec_some</span></span>
and <span class="inlinecode"><span class="id" title="var">compat_semantics_spec_none</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">clight_ptree_sem_ops</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">lasm_ptree_sem_ops</span>.<br/>

<br/>
</div>

<div class="doc">
First, establish that <span class="inlinecode"><span class="id" title="var">M2</span></span> is disjoint as well. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="compiler_module_layer_disjoint"><span class="id" title="lemma">compiler_module_layer_disjoint</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_module"><span class="id" title="definition">CompCertiKOS.transf_module</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> →<br/>
&nbsp;&nbsp;<span class="id" title="definition">module_layer_disjoint</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> →<br/>
&nbsp;&nbsp;<span class="id" title="definition">module_layer_disjoint</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HM</span> <span class="id" title="var">HM1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">module_layer_disjoint</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HM1</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">isOKNone</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_some"><span class="id" title="lemma">get_module_function_transf_some</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">HM</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_none"><span class="id" title="lemma">get_module_function_transf_none</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">HM</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_error"><span class="id" title="lemma">get_module_function_transf_error</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">HM</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_variable_transf"><span class="id" title="lemma">get_module_variable_transf</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">HM</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HM1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">HMf</span> <span class="id" title="var">HMv</span>] | <span class="id" title="var">HL</span>].<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="compiler_correct"><span class="id" title="lemma">compiler_correct</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l64_le</span>: <span class="id" title="definition">L64</span> <span class="id" title="notation">≤</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">M1</span>: <span class="id" title="definition">ClightModules.cmodule</span>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">M2</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#module"><span class="id" title="definition">LAsm.module</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">M1disj</span>: <span class="id" title="definition">module_layer_disjoint</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">TRANSF</span>: <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_module"><span class="id" title="definition">CompCertiKOS.transf_module</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">MOK</span>: <span class="id" title="class">ModuleOK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_layersim"><span class="id" title="record">compiler_layersim</span></a> ( <span class="id" title="notation">〚</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M1"><span class="id" title="variable">M1</span></a> <span class="id" title="notation">〛</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> )  ( <span class="id" title="notation">〚</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#M2"><span class="id" title="variable">M2</span></a> <span class="id" title="notation">〛</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> ) .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">M2disj</span>: <span class="id" title="definition">module_layer_disjoint</span> <span class="id" title="var">M2</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#compiler_module_layer_disjoint"><span class="id" title="lemma">compiler_module_layer_disjoint</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
{ <br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">get_module_function</span> <span class="id" title="var">i</span> <span class="id" title="var">M1</span>) <span class="id" title="keyword">as</span> [ [ <span class="id" title="var">f</span> | ] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfunc</span>.<br/>
&nbsp;&nbsp;×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunc2</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">f&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <span class="id" title="method">get_module_function</span> <span class="id" title="var">i</span> <span class="id" title="var">M2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#f&acute;"><span class="id" title="variable">f&acute;</span></a>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_some"><span class="id" title="lemma">get_module_function_transf_some</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfunc2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f&acute;</span> <span class="id" title="var">Hfunc2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="lemma">compat_semantics_spec_some_disj</span> <span class="id" title="var">M1</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> <span class="id" title="var">i</span> <span class="id" title="var">f</span> <span class="id" title="var">Hfunc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="lemma">compat_semantics_spec_some_disj</span> <span class="id" title="var">M2</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> <span class="id" title="var">i</span> <span class="id" title="var">f&acute;</span> <span class="id" title="var">Hfunc2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> × |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">CFUN</span> <span class="id" title="var">LFUN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">CFUN</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">LFUN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+  <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">ExtcallInvariantsDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">PrimcallInvariantsDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">LayerNamesMatch</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.D"><span class="id" title="variable">D</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="definition">get_layer_prim_valid</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> <span class="id" title="var">s</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#accessors_weak_defined"><span class="id" title="definition">accessors_weak_defined</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">make_program</span> <span class="id" title="var">s</span> <span class="id" title="var">M2</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>) <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#make_program_transf_module_recip"><span class="id" title="method">make_program_transf_module_recip</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">TRANSF</span> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">esplit</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">MAKE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ClightModules.cmodule</span> <span class="id" title="keyword">in</span> × |- ×. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">MAKE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_some_strong"><span class="id" title="lemma">get_module_function_transf_some_strong</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">f2&acute;</span> &amp; <span class="id" title="var">Hfunc&acute;</span> &amp; ? &amp; <span class="id" title="var">TRANS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#module"><span class="id" title="definition">LAsm.module</span></a>, <a class="idref" href="mcertikos.layerlib.LAsm.html#module_ops"><span class="id" title="instance">LAsm.module_ops</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hfunc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">f2&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">f&acute;</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#transf_clight_function&acute;_sig_translated"><span class="id" title="lemma">transf_clight_function&acute;_sig_translated</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="keyword">Opaque</span> <span class="id" title="definition">Conventions1.destroyed_at_call</span> <span class="id" title="definition">loc_external_result</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">clight_step</span> <span class="id" title="keyword">in</span> <span class="id" title="var">SEM1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">SEM1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">sge</span> &amp; <span class="id" title="var">b&acute;</span> &amp; <span class="id" title="var">Hsge</span> &amp; <span class="id" title="var">Hsymb</span> &amp; <span class="id" title="var">Hfunct</span> &amp; <span class="id" title="var">Hstar</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">Hsymb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hsymb&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="method">make_globalenv_stencil_matches</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsge</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">STENCIL_MATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="projection">stencil_matches_symbols</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hsymb&acute;</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">SYMB</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hsymb&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsymb&acute;</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hsymb&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">into</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">Hsge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">make_globalenv</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hsge&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_monad</span> <span class="id" title="var">Hsge&acute;</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">ExtcallInvariantsDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">PrimcallInvariantsDefined</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="class">LayerNamesMatch</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.D"><span class="id" title="variable">D</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="definition">get_layer_prim_valid</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> <span class="id" title="var">s</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> | ]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#accessors_weak_defined"><span class="id" title="definition">accessors_weak_defined</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">make_program</span> <span class="id" title="var">s</span> <span class="id" title="var">M2</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">x_lasm</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hmp2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">TRANSF_PROG</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">x_rtl</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">SeparateCompiler.transf_clight_program_to_rtl</span> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_rtl"><span class="id" title="variable">x_rtl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">fenv</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Inliningspec.fenv_compat</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_rtl"><span class="id" title="variable">x_rtl</span></a>) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#transf_rtl_program"><span class="id" title="definition">CompCertiKOS.transf_rtl_program</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#fenv"><span class="id" title="variable">fenv</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#x_rtl"><span class="id" title="variable">x_rtl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <span class="id" title="var">x_lasm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#make_program_transf_module"><span class="id" title="method">make_program_transf_module</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">TRANSF_PROG</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">x_rtl</span> &amp; <span class="id" title="var">TRANS_X</span> &amp; <span class="id" title="var">fenv</span> &amp; <span class="id" title="var">FENV_COMPAT</span> &amp; <span class="id" title="var">TRANS_RTL</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">GE_VALID</span>: <span class="id" title="method">SelectLongproofX.genv_valid</span> (<span class="id" title="var">GenvValidOps</span> := <span class="id" title="instance">I64Layer.stencil_matches_genv_valid_ops</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>) (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">esplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">stencil_valid</span>. <span class="id" title="tactic">intros</span> ? <span class="id" title="var">pr</span> <span class="id" title="var">Hprim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Hvalid</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hprim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">compatsem_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">CONTAINS_I64H</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ClightI64helpers.genv_contains_helpers</span> <span class="id" title="definition">I64helpers.hf</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#make_program_l64"><span class="id" title="lemma">make_program_l64</span></a>, <span class="id" title="var">l64_le</span> <span class="id" title="keyword">with</span> <span class="id" title="var">typeclass_instances</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">STENCIL_MATCH2</span>: <span class="id" title="record">stencil_matches</span> <span class="id" title="var">s</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x_lasm</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">make_globalenv_stencil_matches</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">make_program_make_globalenv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ASM_INV</span>: <span class="id" title="record">AsmX.asm_invariant</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x_lasm</span>) <span class="id" title="var">rs</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ASM_INVARIANT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">inv_inject_neutral</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="projection">stencil_matches_genv_next</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">INIT_SP_NOT_GLOBAL&acute;</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">b</span> : <span class="id" title="definition">block</span>) (<span class="id" title="var">o</span> : <span class="id" title="abbreviation">int</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rs</span> <span class="id" title="constructor">ESP</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Vptr</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#o"><span class="id" title="variable">o</span></a> → <span class="id" title="definition">Ple</span> (<span class="id" title="projection">Genv.genv_next</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x_lasm</span>)) <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#b"><span class="id" title="variable">b</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="var">erewrite</span> <span class="id" title="projection">stencil_matches_genv_next</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">SYMB&acute;</span>: <span class="id" title="definition">Genv.find_symbol</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">x_lasm</span>) <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">erewrite</span> <span class="id" title="projection">stencil_matches_symbols</span>; <span class="id" title="tactic">eauto</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">km_ops</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#KMOPS"><span class="id" title="instance">KMOPS</span></a> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.D"><span class="id" title="variable">D</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">km</span> := <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#KM"><span class="id" title="instance">KM</span></a> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cc</span> := <span class="id" title="instance">compatlayer_compiler_config</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.L"><span class="id" title="variable">L</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">liftmem_ops</span> := <span class="id" title="instance">mwd_liftmem_ops</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.D"><span class="id" title="variable">D</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">liftmem_prf</span> := <span class="id" title="instance">mwd_liftmem_prf</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS.D"><span class="id" title="variable">D</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">i64helpers</span> := <span class="id" title="lemma">L64_correct</span> <span class="id" title="var">_</span> <span class="id" title="var">l64_le</span> <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#transf_clight_program_correct"><span class="id" title="lemma">transf_clight_program_correct</span></a> (<span class="id" title="var">kernel_mode_prf</span> := <span class="id" title="var">km</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">TRANS_X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">FENV_COMPAT</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">TRANS_RTL</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CONTAINS_I64H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">GE_VALID</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ASM_INV</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">KERNEL_MODE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ARGS</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">INIT_SP_NOT_GLOBAL&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SYMB&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">PC</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SP_NOT_VUNDEF</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">RA_NOT_VUNDEF</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">FORWARD</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> (<span class="id" title="projection">fsim_match_initial_states</span> <span class="id" title="var">FORWARD</span> (<span class="id" title="constructor">Clight.Callstate</span> (<span class="id" title="constructor">Clight.Internal</span> <span class="id" title="var">f</span>) (<span class="id" title="definition">decode_longs</span> (<span class="id" title="definition">Ctypes.typlist_of_typelist</span> (<span class="id" title="definition">Ctypes.type_of_params</span> (<span class="id" title="projection">Clight.fn_params</span> <span class="id" title="var">f</span>))) <span class="id" title="var">args</span>) <span class="id" title="constructor">Clight.Kstop</span> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">j</span> &amp; <span class="id" title="var">s2</span> &amp; <span class="id" title="var">INIT2</span> &amp; <span class="id" title="var">MATCH2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="lemma">simulation_star</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">FORWARD</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hstar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">MATCH2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">jf</span> &amp; <span class="id" title="var">sf</span> &amp; <span class="id" title="var">Hstar2</span> &amp; <span class="id" title="var">MATCHF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exploit</span> (<span class="id" title="projection">fsim_match_final_states</span> <span class="id" title="var">FORWARD</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="definition">encode_long</span> (<span class="id" title="definition">Ctypes.opttyp_of_type</span> (<span class="id" title="projection">Clight.fn_return</span> <span class="id" title="var">f</span>)) <span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">m&acute;_clight</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MATCHF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">FINAL2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">INIT2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">b0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">b</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">FINAL2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfinal</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">j0</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">rs0</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">m&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">esplit</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">make_program_make_globalenv</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#star_plus"><span class="id" title="lemma">star_plus</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunc2</span>: <span class="id" title="method">get_module_function</span> <span class="id" title="var">i</span> <span class="id" title="var">M2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_none"><span class="id" title="lemma">get_module_function_transf_none</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">compat_get_semof_primitive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hfunc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hfunc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>

<br/>
&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">MOK</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">MOK_prim</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfunc</span> <span class="id" title="keyword">in</span> <span class="id" title="var">MOK_prim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MOK_prim</span>; <span class="id" title="tactic">discriminate</span>.<br/>
}<br/>
{ <br/>
&nbsp;&nbsp;</div>

<div class="doc">
XXX: this is pretty ugly, we'll want to think of a way to make
    it better. The main issue is that for function definitions, the
    <span class="inlinecode"><span class="id" title="var">semof_fundef</span></span> on each side might go Error (though in practice
    that would happen under the same circumstances, which is why we
    can prove this). To work around this we actually have to examine
    each possible concrete case. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">PTreeModules</span> <span class="id" title="var">Maps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Transparent</span> <span class="id" title="instance">clight_ptree_sem_ops</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#lasm_ptree_sem_ops"><span class="id" title="instance">lasm_ptree_sem_ops</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Transparent</span> <span class="id" title="instance">compatlayer_ops</span> <span class="id" title="instance">ptree_layer_ops</span> <span class="id" title="instance">ptree_module_ops</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_variable_transf"><span class="id" title="lemma">get_module_variable_transf</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">TRANSF</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="mcertikos.layerlib.CompCertiKOS.html#get_module_function_transf_some"><span class="id" title="lemma">get_module_function_transf_some</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">TRANSF</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">M2disj</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ptree_semantics_mapdef</span>, <span class="id" title="definition">ptree_semantics_def</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ptree_module_variable</span>, <span class="id" title="definition">ptree_module_function</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">ptree_layer_globalvar</span>, <span class="id" title="definition">ptree_layer_primitive</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">M1</span><span class="id" title="notation">)!</span><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [[|]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">HM1i</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">M2</span><span class="id" title="notation">)!</span><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [[|]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">HM2i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="var">monad_norm</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
}<br/>
{ <br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
}<br/>
{ <br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
}<br/>
<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.CompCertiKOSproof.html#CORRECTNESS"><span class="id" title="section">CORRECTNESS</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>