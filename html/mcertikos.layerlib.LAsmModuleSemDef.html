<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>mcertikos.layerlib.LAsmModuleSemDef</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library mcertikos.layerlib.LAsmModuleSemDef</h1>

<div class="code">
</div>

<div class="doc">
This file provide the semantics for the <span class="inlinecode"><span class="id" title="var">Asm</span></span> instructions. Since we introduce paging mechanisms, the semantics of memory load and store are different from <span class="inlinecode"><span class="id" title="var">Compcert</span></span> <span class="inlinecode"><span class="id" title="var">Asm</span></span>
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coqlib</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Maps</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.ASTExtra.html#"><span class="id" title="library">ASTExtra</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Integers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Floats</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Values</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Memory</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Events</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Globalenvs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Smallstep</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">AsmX</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Conventions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Machregs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.lib.Decision</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.logic.PTreeModules</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.logic.PTreeSemantics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compcertx.MemWithData</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compcertx.Stencil</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compcertx.MakeProgram</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatData</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatPrimSem</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatLayers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatExternalCalls</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">CompCertBuiltins</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#"><span class="id" title="library">LAsm</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.MemoryExtra.html#"><span class="id" title="library">MemoryExtra</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h2 class="section">Definitions of Semantics of LAsm modules</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="ModuleSemantics"><span class="id" title="section">ModuleSemantics</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hstencil</span>: <span class="id" title="class">Stencil</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmem</span>: <span class="id" title="class">Mem.MemoryModel</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmwd</span>: <span class="id" title="class">UseMemWithData</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ModuleSemantics.mem"><span class="id" title="variable">mem</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ef_errmsg"><span class="id" title="definition">ef_errmsg</span></a> (<span class="id" title="var">ef</span>: <span class="id" title="inductive">external_function</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef"><span class="id" title="variable">ef</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_external</span> <span class="id" title="var">i</span> <span class="id" title="var">sg</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_external " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_builtin</span> <span class="id" title="var">i</span> <span class="id" title="var">sg</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_builtin " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_vload</span> <span class="id" title="var">chunk</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_vload" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_vstore</span> <span class="id" title="var">chunk</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_vstore" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_vload_global</span> <span class="id" title="var">chunk</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_vload_global " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_vstore_global</span> <span class="id" title="var">chunk</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_vstore_global " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_malloc</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_malloc" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_free</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_free" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_memcpy</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_memcpy" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_annot</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_annot " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_annot_val</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_annot_val " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_inline_asm</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="constructor">MSG</span> "EF_inline_asm " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="constructor">CTX</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ef_OK"><span class="id" title="definition">ef_OK</span></a> (<span class="id" title="var">ef</span> : <span class="id" title="inductive">external_function</span>) : <span class="id" title="inductive">res</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef"><span class="id" title="variable">ef</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_annot</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">Error</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef_errmsg"><span class="id" title="definition">ef_errmsg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef"><span class="id" title="variable">ef</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">EF_annot_val</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">Error</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef_errmsg"><span class="id" title="definition">ef_errmsg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef"><span class="id" title="variable">ef</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="instr_OK"><span class="id" title="definition">instr_OK</span></a> (<span class="id" title="var">i</span> : <a class="idref" href="mcertikos.layerlib.LAsm.html#instruction"><span class="id" title="inductive">instruction</span></a>) : <span class="id" title="inductive">res</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="mcertikos.layerlib.LAsm.html#asm_instruction"><span class="id" title="constructor">asm_instruction</span></a> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Pbuiltin</span> <span class="id" title="var">ef</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef_OK"><span class="id" title="definition">ef_OK</span></a> <span class="id" title="var">ef</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Error</span> <span class="id" title="var">e</span> ⇒ <span class="id" title="constructor">Error</span> (<span class="id" title="constructor">MSG</span> "Pbuiltin " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Pannot</span> <span class="id" title="var">ef</span> <span class="id" title="var">_</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ef_OK"><span class="id" title="definition">ef_OK</span></a> <span class="id" title="var">ef</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Error</span> <span class="id" title="var">e</span> ⇒ <span class="id" title="constructor">Error</span> (<span class="id" title="constructor">MSG</span> "Pannot " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="instrs_OK"><span class="id" title="definition">instrs_OK</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="mcertikos.layerlib.LAsm.html#code"><span class="id" title="definition">code</span></a>) : <span class="id" title="inductive">res</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instr_OK"><span class="id" title="definition">instr_OK</span></a> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">OK</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Error</span> <span class="id" title="var">msg</span> ⇒ <span class="id" title="constructor">Error</span> (<span class="id" title="constructor">MSG</span> "Forbidden instruction: " <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">msg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="lasm_program_format_ops"><span class="id" title="instance">lasm_program_format_ops</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ProgramFormatOps</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">function</span></a> <span class="id" title="inductive">Ctypes.type</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">fundef</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_internal</span> <span class="id" title="var">κ</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> (<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_code"><span class="id" title="projection">fn_code</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">OK</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="constructor">OK</span> (<span class="id" title="constructor">AST.Internal</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Error</span> <span class="id" title="var">msg</span> ⇒ <span class="id" title="constructor">Error</span> <span class="id" title="var">msg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_external</span> <span class="id" title="var">D</span> <span class="id" title="var">i</span> σ := <span class="id" title="constructor">OK</span> (<span class="id" title="constructor">AST.External</span> (<span class="id" title="constructor">EF_external</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> (<span class="id" title="definition">compatsem_sig</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_varinfo</span> τ := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="instrs_OK_in"><span class="id" title="lemma">instrs_OK_in</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">c</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#c"><span class="id" title="variable">c</span></a> → <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> → <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instr_OK"><span class="id" title="definition">instr_OK</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">intuition</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instr_OK"><span class="id" title="definition">instr_OK</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [[] | ]; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> <span class="id" title="var">c</span>) <span class="id" title="keyword">as</span> [[] | ]; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instr_OK"><span class="id" title="definition">instr_OK</span></a> <span class="id" title="var">a</span>); <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_instr_in"><span class="id" title="lemma">find_instr_in</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">c</span> <span class="id" title="var">ofs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">find_instr</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#c"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">discriminate</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">ofs</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHc</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="lasm_program_format_prf"><span class="id" title="instance">lasm_program_format_prf</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ProgramFormat</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">function</span></a> <span class="id" title="inductive">Ctypes.type</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">fundef</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">D</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">Hi</span> σ1 σ2 <span class="id" title="var">H</span>σ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>σ; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstep</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hvalid</span>] <span class="id" title="var">Hinvs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">sextcall_sig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hstep</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hvalid</span>] <span class="id" title="var">Hinvs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="lasm_make_external_sim_monotonic"><span class="id" title="instance">lasm_make_external_sim_monotonic</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">Proper</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">∀</span> <span class="id" title="var">R</span><span class="id" title="notation">,</span> <span class="id" title="notation">-</span> <span class="id" title="notation">==&gt;</span> <span class="id" title="abbreviation">sim</span> <span class="id" title="var">R</span> <span class="id" title="notation">++&gt;</span> <span class="id" title="inductive">res_le</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">D</span> ⇒ <span class="id" title="method">make_external</span> (<span class="id" title="var">D</span> := <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">R</span> <span class="id" title="var">i</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_monotonic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsim</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstep</span> <span class="id" title="var">Hcsig</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">Hinvs</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">sextcall_sig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstep</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">Hinvs</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hstep</span> <span class="id" title="var">Hsig</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">Hinvs</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">make_program_ops</span>: !<span class="id" title="class">MakeProgramOps</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">function</span></a> <span class="id" title="inductive">Ctypes.type</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">fundef</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">make_program_prf</span>: !<span class="id" title="class">MakeProgram</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">function</span></a> <span class="id" title="inductive">Ctypes.type</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">fundef</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="make_program_globalenv"><span class="id" title="lemma">make_program_globalenv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_program</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">make_globalenv</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">make_globalenv</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="make_globalenv_program"><span class="id" title="lemma">make_globalenv_program</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} (<span class="id" title="var">ge</span>:<a class="idref" href="mcertikos.layerlib.LAsm.html#genv"><span class="id" title="definition">genv</span></a>) <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">make_globalenv</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <span class="id" title="method">make_program</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">make_globalenv</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_monad</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="make_globalenv_instrs_OK"><span class="id" title="lemma">make_globalenv_instrs_OK</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} (<span class="id" title="var">ge</span>:<a class="idref" href="mcertikos.layerlib.LAsm.html#genv"><span class="id" title="definition">genv</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">make_globalenv</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct_ptr</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> (<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_code"><span class="id" title="projection">fn_code</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> 0; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hmakege</span> <span class="id" title="var">Hfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">make_globalenv_find_funct_ptr</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hmakege</span>; [|<span class="id" title="var">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmakege</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> [<span class="id" title="var">_</span> [[<span class="id" title="var">fi</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hmi</span>]] | [? [<span class="id" title="var">_</span> ?]]]]]; [|<span class="id" title="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> (<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_code"><span class="id" title="projection">fn_code</span></a> <span class="id" title="var">fi</span>)) <span class="id" title="keyword">as</span> [[]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="make_globalenv_instr_OK"><span class="id" title="lemma">make_globalenv_instr_OK</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} (<span class="id" title="var">ge</span>:<a class="idref" href="mcertikos.layerlib.LAsm.html#genv"><span class="id" title="definition">genv</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">f</span> <span class="id" title="var">ofs</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">make_globalenv</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct_ptr</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">find_instr</span> (<span class="id" title="definition">Int.unsigned</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ofs"><span class="id" title="variable">ofs</span></a>) (<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_code"><span class="id" title="projection">fn_code</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instr_OK"><span class="id" title="definition">instr_OK</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK_in"><span class="id" title="lemma">instrs_OK_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#find_instr_in"><span class="id" title="lemma">find_instr_in</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#make_globalenv_instrs_OK"><span class="id" title="lemma">make_globalenv_instrs_OK</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="make_program_instrs_OK"><span class="id" title="lemma">make_program_instrs_OK</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} <span class="id" title="var">b</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_program</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct_ptr</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK"><span class="id" title="definition">instrs_OK</span></a> (<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_code"><span class="id" title="projection">fn_code</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> 0; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hmakep</span> <span class="id" title="var">Hfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#make_globalenv_instrs_OK"><span class="id" title="lemma">make_globalenv_instrs_OK</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#make_program_globalenv"><span class="id" title="lemma">make_program_globalenv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="make_program_instr_OK"><span class="id" title="lemma">make_program_instr_OK</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} <span class="id" title="var">b</span> <span class="id" title="var">f</span> <span class="id" title="var">ofs</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">make_program</span> (<span class="id" title="var">D</span>:=<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct_ptr</span> (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="constructor">Internal</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">find_instr</span> (<span class="id" title="definition">Int.unsigned</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ofs"><span class="id" title="variable">ofs</span></a>) (<a class="idref" href="mcertikos.layerlib.LAsm.html#fn_code"><span class="id" title="projection">fn_code</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instr_OK"><span class="id" title="definition">instr_OK</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">OK</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#instrs_OK_in"><span class="id" title="lemma">instrs_OK_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#find_instr_in"><span class="id" title="lemma">find_instr_in</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#make_program_instrs_OK"><span class="id" title="lemma">make_program_instrs_OK</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="LC"><span class="id" title="instance">LC</span></a>: <span class="id" title="keyword">∀</span> {<span class="id" title="var">D</span>} (<span class="id" title="var">L</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">acc_def_prf</span>: !<a class="idref" href="mcertikos.layerlib.LAsm.html#AccessorsDefined"><span class="id" title="class">AccessorsDefined</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#LayerConfigurationOps"><span class="id" title="class">LAsm.LayerConfigurationOps</span></a> (<span class="id" title="var">ec_ops</span> := <span class="id" title="instance">compatlayer_extcall_ops</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#compatlayer_configuration_ops"><span class="id" title="instance">compatlayer_configuration_ops</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="lasm_step"><span class="id" title="inductive">lasm_step</span></a> {<span class="id" title="var">D</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">M</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#module"><span class="id" title="definition">module</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">L</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span>: <span class="id" title="definition">ident</span>) (<span class="id" title="var">s</span>: <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ModuleSemantics.stencil"><span class="id" title="variable">stencil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs</span>: <span class="id" title="definition">regset</span>) (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) (<span class="id" title="var">rs&acute;</span>: <span class="id" title="definition">regset</span>) (<span class="id" title="var">m&acute;</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="lasm_step_intro"><span class="id" title="constructor">lasm_step_intro</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
TODO: move this check somewhere else 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">acc_def_prf</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#AccessorsDefined"><span class="id" title="class">AccessorsDefined</span></a> <span class="id" title="var">L</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ge</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#genv"><span class="id" title="definition">genv</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">b</span>: <span class="id" title="definition">block</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hsymb</span>: <span class="id" title="method">find_symbol</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hge</span>: <span class="id" title="definition">make_globalenv</span> <span class="id" title="var">s</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="method">ret</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">PC_VAL</span>: <span class="id" title="var">rs</span> <span class="id" title="constructor">PC</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Values.Vptr</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="definition">Integers.Int.zero</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
semantics  Potential problem: for an arbitrary primitive call, e.g. context switch, we are not capable of
        correctly characterizing the "final state" of the function execution  We have to make sure that LAsm takes at least one step. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">STAR</span>: <span class="id" title="inductive">plus</span> (<a class="idref" href="mcertikos.layerlib.LAsm.html#step"><span class="id" title="inductive">LAsm.step</span></a> (<span class="id" title="var">lcfg_ops</span> := <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#LC"><span class="id" title="instance">LC</span></a> <span class="id" title="var">L</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ge"><span class="id" title="variable">ge</span></a> (<span class="id" title="constructor">State</span> <span class="id" title="var">rs</span> <span class="id" title="var">m</span>) <span class="id" title="definition">E0</span> (<span class="id" title="constructor">State</span> <span class="id" title="var">rs&acute;</span> <span class="id" title="var">m&acute;</span>))<br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">extcall_invariants_defined_dec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">primcall_invariants_defined_dec</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">prim_valid_dec</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="accessors_weak_defined"><span class="id" title="definition">accessors_weak_defined</span></a> `{<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>} (<span class="id" title="var">L</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="projection">cl_exec_load</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Errors.OK</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="projection">cl_exec_store</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Errors.OK</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="lasm_primsem"><span class="id" title="definition">lasm_primsem</span></a> {<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>} (<span class="id" title="var">M</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#module"><span class="id" title="definition">module</span></a>) (<span class="id" title="var">L</span>: <span class="id" title="record">compatlayer</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a>) (<span class="id" title="var">i</span>: <span class="id" title="definition">ident</span>) (<span class="id" title="var">f</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#function"><span class="id" title="record">function</span></a>): <span class="id" title="definition">compatsem</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#D"><span class="id" title="variable">D</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_primsem_step</span> <span class="id" title="constructor">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">{|</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_step</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">lasm_step</span> <span class="id" title="constructor">M</span> <span class="id" title="constructor">L</span> <span class="id" title="constructor">i</span><span class="id" title="constructor">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_sig</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">fn_sig</span> <span class="id" title="constructor">f</span><span class="id" title="constructor">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_valid</span> <span class="id" title="constructor">s</span> <span class="id" title="constructor">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="constructor">decide</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">ExtcallInvariantsDefined</span> <span class="id" title="constructor">L</span><span class="id" title="constructor">)</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="constructor">decide</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">PrimcallInvariantsDefined</span> <span class="id" title="constructor">L</span><span class="id" title="constructor">)</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="constructor">decide</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">LayerNamesMatch</span> <span class="id" title="constructor">D</span> <span class="id" title="constructor">L</span><span class="id" title="constructor">)</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="constructor">decide</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">get_layer_prim_valid</span> <span class="id" title="constructor">L</span> <span class="id" title="constructor">s</span><span class="id" title="constructor">)</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="constructor">accessors_weak_defined</span> <span class="id" title="constructor">L</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="constructor">make_program</span> <span class="id" title="constructor">s</span> <span class="id" title="constructor">M</span> <span class="id" title="constructor">L</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">|</span> <span class="id" title="constructor">OK</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">⇒</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">|</span> <span class="id" title="constructor">Error</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">⇒</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">|};</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_name</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">Some</span> <span class="id" title="constructor">i</span><span class="id" title="constructor">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_props</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">Error</span> <span class="id" title="constructor">nil</span><span class="id" title="constructor">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">sprimcall_invs</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">Error</span> <span class="id" title="constructor">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab13"></a><h1 class="section">Semantics of whole modules</h1>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="lasm_ptree_sem_ops"><span class="id" title="instance">lasm_ptree_sem_ops</span></a>: <span class="id" title="class">FunctionSemanticsOps</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">semof_fundef</span> <span class="id" title="var">D</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span> := <span class="id" title="constructor">OK</span> (<a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#lasm_primsem"><span class="id" title="definition">lasm_primsem</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.LAsmModuleSemDef.html#ModuleSemantics"><span class="id" title="section">ModuleSemantics</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>