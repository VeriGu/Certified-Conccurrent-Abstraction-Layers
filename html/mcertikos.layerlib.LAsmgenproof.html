<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>mcertikos.layerlib.LAsmgenproof</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library mcertikos.layerlib.LAsmgenproof</h1>

<div class="code">

<br/>
</div>

<div class="doc">
This file provides the per-function correctness proof of the
    compiler from CompCertX <span class="inlinecode"><span class="id" title="var">AsmX</span></span> to the <span class="inlinecode"><span class="id" title="var">LAsm</span></span> instructions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">AST</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Integers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Values</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Memory</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Globalenvs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Events</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MemWithData</span>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="mcertikos.layerlib.LAsmgen.html#"><span class="id" title="library">LAsmgen</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatData</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">compcertx.driver.CompCertBuiltins</span>.<br/>

<br/>
</div>

<div class="doc">
Per-function semantics of <span class="inlinecode"><span class="id" title="var">LAsm</span></span>, following <span class="inlinecode"><span class="id" title="var">AsmX</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a name="PFLAsm"><span class="id" title="module">PFLAsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="PFLAsm.WITHLAYERCONFOPS"><span class="id" title="section">WITHLAYERCONFOPS</span></a>.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">lc_ops</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#LayerConfigurationOps"><span class="id" title="class">LAsm.LayerConfigurationOps</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="PFLAsm.initial_state"><span class="id" title="inductive">initial_state</span></a> (<span class="id" title="var">lm</span>: <span class="id" title="definition">Asm.regset</span>) (<span class="id" title="var">p</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#program"><span class="id" title="definition">LAsm.program</span></a>) (<span class="id" title="var">i</span>: <span class="id" title="definition">ident</span>) (<span class="id" title="var">sg</span>: <span class="id" title="record">signature</span>) (<span class="id" title="var">args</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">val</span>) (<span class="id" title="var">m</span>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.WITHLAYERCONFOPS.mem"><span class="id" title="variable">mem</span></a>): <span class="id" title="inductive">Asm.state</span> → <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="PFLAsm.initial_state&acute;_intro"><span class="id" title="constructor">initial_state&acute;_intro</span></a>    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hb</span>: <span class="id" title="definition">Genv.find_symbol</span> (<span class="id" title="definition">Genv.globalenv</span> <span class="id" title="var">p</span>) <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hpc</span>: <span class="id" title="var">lm</span> <span class="id" title="constructor">Asm.PC</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Vptr</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="definition">Int.zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hargs</span>: <span class="id" title="definition">Asm.extcall_arguments</span> <span class="id" title="var">lm</span> <span class="id" title="var">m</span> <span class="id" title="var">sg</span> <span class="id" title="var">args</span>)    <br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#initial_state"><span class="id" title="inductive">initial_state</span></a> <span class="id" title="var">lm</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span> <span class="id" title="var">sg</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span> (<span class="id" title="constructor">Asm.State</span> <span class="id" title="var">lm</span> <span class="id" title="var">m</span>)<br/>
.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="PFLAsm.final_state"><span class="id" title="definition">final_state</span></a> := <span class="id" title="inductive">AsmX.final_state</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="PFLAsm.semantics"><span class="id" title="definition">semantics</span></a>  (<span class="id" title="var">lm</span>: <span class="id" title="definition">Asm.regset</span>) (<span class="id" title="var">p</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#program"><span class="id" title="definition">LAsm.program</span></a>) (<span class="id" title="var">i</span>: <span class="id" title="definition">ident</span>) (<span class="id" title="var">sg</span>: <span class="id" title="record">signature</span>) (<span class="id" title="var">args</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">val</span>) (<span class="id" title="var">m</span>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.WITHLAYERCONFOPS.mem"><span class="id" title="variable">mem</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="constructor">Smallstep.Semantics</span> (<a class="idref" href="mcertikos.layerlib.LAsm.html#step"><span class="id" title="inductive">LAsm.step</span></a>) (<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.initial_state"><span class="id" title="inductive">initial_state</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#lm"><span class="id" title="variable">lm</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) (<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.final_state"><span class="id" title="definition">final_state</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#lm"><span class="id" title="variable">lm</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#sg"><span class="id" title="variable">sg</span></a>) (<span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#p"><span class="id" title="variable">p</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.WITHLAYERCONFOPS"><span class="id" title="section">WITHLAYERCONFOPS</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm"><span class="id" title="module">PFLAsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
Correctness of <span class="inlinecode"><span class="id" title="var">exec_load</span></span> and <span class="inlinecode"><span class="id" title="var">exec_store</span></span> operations in kernel mode. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="KernelModeOps"><span class="id" title="record">KernelModeOps</span></a> `{<span class="id" title="var">memory_model_ops</span>: <span class="id" title="class">Mem.MemoryModelOps</span>} (<span class="id" title="var">D</span>: <span class="id" title="record">compatdata</span>): <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="kernel_mode"><span class="id" title="projection">kernel_mode</span></a>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#D"><span class="id" title="variable">D</span></a> → <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="KernelMode"><span class="id" title="record">KernelMode</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">memory_model_ops</span>: <span class="id" title="class">Mem.MemoryModelOps</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">D</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">km_ops</span>: !<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#KernelModeOps"><span class="id" title="class">KernelModeOps</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#D"><span class="id" title="variable">D</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">Hmwd</span>: <span class="id" title="class">UseMemWithData</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#mem"><span class="id" title="variable">mem</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">ec_ops_x</span>: !<span class="id" title="class">ExternalCallsOpsX</span> (<span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#D"><span class="id" title="variable">D</span></a>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">lc_ops</span>: !<a class="idref" href="mcertikos.layerlib.LAsm.html#LayerConfigurationOps"><span class="id" title="class">LAsm.LayerConfigurationOps</span></a> (<span class="id" title="var">ec_ops</span> := <span class="id" title="instance">external_calls_ops_x_to_external_calls_ops</span> (<span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#D"><span class="id" title="variable">D</span></a>))}<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="exec_load_exec_loadex"><span class="id" title="projection">exec_load_exec_loadex</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">F</span> <span class="id" title="var">V</span>} (<span class="id" title="var">ge</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="var">chunk</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">rs</span> <span class="id" title="var">rd</span> <span class="id" title="var">m&acute;</span> <span class="id" title="var">rs&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_load</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#exec_load"><span class="id" title="method">LAsm.exec_load</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="exec_store_exec_storeex"><span class="id" title="projection">exec_store_exec_storeex</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">F</span> <span class="id" title="var">V</span>} (<span class="id" title="var">ge</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="var">chunk</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">rs</span> <span class="id" title="var">rd</span> <span class="id" title="var">rl</span> <span class="id" title="var">m&acute;</span> <span class="id" title="var">rs&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_store</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rl"><span class="id" title="variable">rl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#exec_store"><span class="id" title="method">LAsm.exec_store</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rl"><span class="id" title="variable">rl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="external_functions_kernel_mode"><span class="id" title="projection">external_functions_kernel_mode</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">sg</span> (<span class="id" title="var">WB</span>: <span class="id" title="var">_</span> → <span class="id" title="keyword">Prop</span>) {<span class="id" title="var">F</span> <span class="id" title="var">V</span>} (<span class="id" title="var">ge</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">external_functions_sem</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WB"><span class="id" title="variable">WB</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
Missing lemma from Asm/AsmX 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="WITHMEM"><span class="id" title="section">WITHMEM</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">memory_model_ops</span>: <span class="id" title="class">Mem.MemoryModelOps</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span>  {<span class="id" title="var">F1</span> <span class="id" title="var">V1</span>} (<span class="id" title="var">ge1</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F1"><span class="id" title="variable">F1</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V1"><span class="id" title="variable">V1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">F2</span> <span class="id" title="var">V2</span>} (<span class="id" title="var">ge2</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F2"><span class="id" title="variable">F2</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V2"><span class="id" title="variable">V2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">genv_symbols_preserved</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="definition">Genv.find_symbol</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge2"><span class="id" title="variable">ge2</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">Genv.find_symbol</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge1"><span class="id" title="variable">ge1</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exec_load_symbols_preserved"><span class="id" title="lemma">exec_load_symbols_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">rs</span> <span class="id" title="var">m</span> <span class="id" title="var">chunk</span> <span class="id" title="var">a</span> <span class="id" title="var">rd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_load</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHMEM.ge2"><span class="id" title="variable">ge2</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_load</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHMEM.ge1"><span class="id" title="variable">ge1</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.exec_load</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="lemma">AsmX.eval_addrmode_symbols_preserved</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exec_store_symbols_preserved"><span class="id" title="lemma">exec_store_symbols_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">rs</span> <span class="id" title="var">m</span> <span class="id" title="var">chunk</span> <span class="id" title="var">a</span> <span class="id" title="var">rd</span> <span class="id" title="var">rl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_store</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHMEM.ge2"><span class="id" title="variable">ge2</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rl"><span class="id" title="variable">rl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_store</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHMEM.ge1"><span class="id" title="variable">ge1</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rl"><span class="id" title="variable">rl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.exec_store</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="lemma">AsmX.eval_addrmode_symbols_preserved</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHMEM"><span class="id" title="section">WITHMEM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="WITHKERNELMODE"><span class="id" title="section">WITHKERNELMODE</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">kernel_mode_prf</span>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#KernelMode"><span class="id" title="class">KernelMode</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="builtin_functions_kernel_mode"><span class="id" title="lemma">builtin_functions_kernel_mode</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">sg</span> (<span class="id" title="var">WB</span>: <span class="id" title="var">_</span> → <span class="id" title="keyword">Prop</span>) {<span class="id" title="var">F</span> <span class="id" title="var">V</span>} (<span class="id" title="var">ge</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">builtin_functions_sem</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WB"><span class="id" title="variable">WB</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inline_assembly_kernel_mode"><span class="id" title="lemma">inline_assembly_kernel_mode</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> (<span class="id" title="var">WB</span>: <span class="id" title="var">_</span> → <span class="id" title="keyword">Prop</span>) {<span class="id" title="var">F</span> <span class="id" title="var">V</span>} (<span class="id" title="var">ge</span>: <span class="id" title="var">_</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="var">args</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">res</span> <span class="id" title="var">m&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">inline_assembly_sem</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WB"><span class="id" title="variable">WB</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#res"><span class="id" title="variable">res</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a name="WITHKERNELMODE.prog"><span class="id" title="variable">prog</span></a>: <span class="id" title="definition">Asm.program</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="WITHKERNELMODE.tprog"><span class="id" title="variable">tprog</span></a> := <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_program"><span class="id" title="definition">LAsmgen.transf_program</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.prog"><span class="id" title="variable">prog</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> := <span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.prog"><span class="id" title="variable">prog</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> := <span class="id" title="definition">Genv.globalenv</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tprog"><span class="id" title="variable">tprog</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">s</span>: <span class="id" title="definition">ident</span>), <span class="id" title="definition">Genv.find_symbol</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">Genv.find_symbol</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">ge</span>, <span class="id" title="var">tge</span>, <span class="id" title="var">tprog</span>, <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_program"><span class="id" title="definition">LAsmgen.transf_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Genv.find_symbol_transf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="genv_next_preserved"><span class="id" title="lemma">genv_next_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">Genv.genv_next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="projection">Genv.genv_next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Genv.genv_next_transf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="varinfo_preserved"><span class="id" title="lemma">varinfo_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="definition">Genv.find_var_info</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">Genv.find_var_info</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#b"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">ge</span>, <span class="id" title="var">tge</span>, <span class="id" title="var">tprog</span>, <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_program"><span class="id" title="definition">LAsmgen.transf_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Genv.find_var_info_transf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="functions_translated"><span class="id" title="lemma">functions_translated</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">v</span>: <span class="id" title="inductive">val</span>) (<span class="id" title="var">f</span>: <span class="id" title="definition">Asm.fundef</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_fundef"><span class="id" title="definition">LAsmgen.transf_fundef</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="lemma">Genv.find_funct_transf</span> <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_fundef"><span class="id" title="definition">LAsmgen.transf_fundef</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="function_ptr_translated"><span class="id" title="lemma">function_ptr_translated</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">b</span>: <span class="id" title="definition">block</span>) (<span class="id" title="var">f</span>: <span class="id" title="definition">Asm.fundef</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct_ptr</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Genv.find_funct_ptr</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_fundef"><span class="id" title="definition">LAsmgen.transf_fundef</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="lemma">Genv.find_funct_ptr_transf</span> <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_fundef"><span class="id" title="definition">LAsmgen.transf_fundef</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="asm_funsig"><span class="id" title="definition">asm_funsig</span></a> (<span class="id" title="var">f</span>: <span class="id" title="definition">Asm.fundef</span>): <span class="id" title="record">signature</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Internal</span> <span class="id" title="var">fn</span> ⇒ <span class="id" title="projection">Asm.fn_sig</span> <span class="id" title="var">fn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">External</span> <span class="id" title="var">ef</span> ⇒ <span class="id" title="definition">ef_sig</span> <span class="id" title="var">ef</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="lasm_funsig"><span class="id" title="definition">lasm_funsig</span></a> (<span class="id" title="var">f</span>: <a class="idref" href="mcertikos.layerlib.LAsm.html#fundef"><span class="id" title="definition">LAsm.fundef</span></a>): <span class="id" title="record">signature</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Internal</span> <span class="id" title="var">fn</span> ⇒ <a class="idref" href="mcertikos.layerlib.LAsm.html#fn_sig"><span class="id" title="projection">LAsm.fn_sig</span></a> <span class="id" title="var">fn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">External</span> <span class="id" title="var">ef</span> ⇒ <span class="id" title="definition">ef_sig</span> <span class="id" title="var">ef</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="sig_function_translated"><span class="id" title="lemma">sig_function_translated</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#lasm_funsig"><span class="id" title="definition">lasm_funsig</span></a> (<a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_fundef"><span class="id" title="definition">LAsmgen.transf_fundef</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#asm_funsig"><span class="id" title="definition">asm_funsig</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
First, we show that <span class="inlinecode"><span class="id" title="var">LAsm.exec_instr</span></span> has the same semantics as
  <span class="inlinecode"><span class="id" title="var">Asm.exec_instr</span></span> in kernel mode. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="label_pos_preserved"><span class="id" title="lemma">label_pos_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">c</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.label_pos</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="mcertikos.layerlib.LAsm.html#asm_instruction"><span class="id" title="constructor">LAsm.asm_instruction</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.label_pos</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#c"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.is_label</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="goto_label_preserved"><span class="id" title="lemma">goto_label_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> <span class="id" title="var">rs</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.goto_label</span> (<a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_function"><span class="id" title="definition">LAsmgen.transf_function</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">Asm.goto_label</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.goto_label</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_code"><span class="id" title="definition">LAsmgen.transf_code</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#label_pos_preserved"><span class="id" title="lemma">label_pos_preserved</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exec_instr_exec_instrex"><span class="id" title="lemma">exec_instr_exec_instrex</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>: <span class="id" title="record">Asm.function</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span>: <span class="id" title="inductive">Asm.instruction</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs</span>: <span class="id" title="definition">Asm.regset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs&acute;</span>: <span class="id" title="definition">Asm.regset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m&acute;</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">KERNEL_MODE</span>: <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">EXEC_INSTR</span>: <span class="id" title="definition">Asm.exec_instr</span> (<span class="id" title="var">Hfl</span> := <span class="id" title="instance">Asm.FindLabels_instance_0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">MemAccessors0</span> := <span class="id" title="instance">Asm.mem_accessors_default</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#exec_instr"><span class="id" title="definition">LAsm.exec_instr</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.layerlib.LAsmgen.html#transf_function"><span class="id" title="definition">LAsmgen.transf_function</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.layerlib.LAsm.html#asm_instruction"><span class="id" title="constructor">LAsm.asm_instruction</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <span class="id" title="lemma">AsmX.exec_instr_symbols_preserved</span> <span class="id" title="keyword">in</span> <span class="id" title="var">EXEC_INSTR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_load_symbols_preserved"><span class="id" title="lemma">exec_load_symbols_preserved</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_store_symbols_preserved"><span class="id" title="lemma">exec_store_symbols_preserved</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_load_exec_loadex"><span class="id" title="method">exec_load_exec_loadex</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_store_exec_storeex"><span class="id" title="method">exec_store_exec_storeex</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#goto_label_preserved"><span class="id" title="lemma">goto_label_preserved</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="var">r</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Coqlib.list_nth_z</span> <span class="id" title="var">tbl</span> (<span class="id" title="definition">Int.unsigned</span> <span class="id" title="var">i</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#goto_label_preserved"><span class="id" title="lemma">goto_label_preserved</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="find_instr_preserved"><span class="id" title="lemma">find_instr_preserved</span></a> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.find_instr</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.find_instr</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="mcertikos.layerlib.LAsm.html#asm_instruction"><span class="id" title="constructor">LAsm.asm_instruction</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.layerlib.LAsm.html#asm_instruction"><span class="id" title="constructor">LAsm.asm_instruction</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Coqlib.zeq</span> <span class="id" title="var">n</span> 0); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We have to disable externals as builtins in the source <span class="inlinecode"><span class="id" title="var">Asm</span></span> code. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="WITHKERNELMODE.cc_ops"><span class="id" title="variable">cc_ops</span></a> : <span class="id" title="class">CompilerConfigOps</span> (<span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">cc_enable_external_as_builtin</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">cc_ops</span>.<br/>

<br/>
</div>

<div class="doc">
Remember that we are compiling Asm code, so the external
  functions must be compilable. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ec_prf</span>: !<span class="id" title="class">CompilerConfiguration</span> (<span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>)}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="step_stepex"><span class="id" title="lemma">step_stepex</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">rs</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">t</span> <span class="id" title="var">s&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">Asm.step</span> (<span class="id" title="var">MemAccessors0</span> := <span class="id" title="instance">Asm.mem_accessors_default</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> (<span class="id" title="constructor">Asm.State</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsm.html#step"><span class="id" title="inductive">LAsm.step</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tge"><span class="id" title="variable">tge</span></a> (<span class="id" title="constructor">Asm.State</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s&acute;"><span class="id" title="variable">s&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 2; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#function_ptr_translated"><span class="id" title="lemma">function_ptr_translated</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#find_instr_preserved"><span class="id" title="lemma">find_instr_preserved</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_instr_exec_instrex"><span class="id" title="lemma">exec_instr_exec_instrex</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#function_ptr_translated"><span class="id" title="lemma">function_ptr_translated</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#find_instr_preserved"><span class="id" title="lemma">find_instr_preserved</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">external_call_symbols_preserved&acute;</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#varinfo_preserved"><span class="id" title="lemma">varinfo_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#genv_next_preserved"><span class="id" title="lemma">genv_next_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#exec_step_builtin"><span class="id" title="constructor">LAsm.exec_step_builtin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#function_ptr_translated"><span class="id" title="lemma">function_ptr_translated</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#find_instr_preserved"><span class="id" title="lemma">find_instr_preserved</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">external_call_symbols_preserved&acute;</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#varinfo_preserved"><span class="id" title="lemma">varinfo_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#genv_next_preserved"><span class="id" title="lemma">genv_next_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#exec_step_annot"><span class="id" title="constructor">LAsm.exec_step_annot</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#function_ptr_translated"><span class="id" title="lemma">function_ptr_translated</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">external_call_symbols_preserved&acute;</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#varinfo_preserved"><span class="id" title="lemma">varinfo_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#genv_next_preserved"><span class="id" title="lemma">genv_next_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#exec_step_external"><span class="id" title="constructor">LAsm.exec_step_external</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#genv_next_preserved"><span class="id" title="lemma">genv_next_preserved</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
To make several steps, it is necessary to prove that
  <span class="inlinecode"><span class="id" title="var">kernel_mode</span></span> is preserved in <span class="inlinecode"><span class="id" title="var">Asm</span></span>. 
<div class="paragraph"> </div>

 We first prove that <span class="inlinecode"><span class="id" title="var">Asm</span></span> internal instructions actually preserve the data. 
<div class="paragraph"> </div>

 TODO: generalize those proofs 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exec_load_data_preserved"><span class="id" title="lemma">exec_load_data_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">chunk</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">rs</span> <span class="id" title="var">rd</span> <span class="id" title="var">m&acute;</span> <span class="id" title="var">rs&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_load</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.exec_load</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Mem.loadv</span> <span class="id" title="var">chunk</span> <span class="id" title="var">m</span> (<span class="id" title="definition">Asm.eval_addrmode</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <span class="id" title="var">a</span> <span class="id" title="var">rs</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exec_store_data_preserved"><span class="id" title="lemma">exec_store_data_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">chunk</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">rs</span> <span class="id" title="var">rd</span> <span class="id" title="var">rl</span> <span class="id" title="var">m&acute;</span> <span class="id" title="var">rs&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.exec_store</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#chunk"><span class="id" title="variable">chunk</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rd"><span class="id" title="variable">rd</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rl"><span class="id" title="variable">rl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.exec_store</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Mem.storev</span> <span class="id" title="var">chunk</span> <span class="id" title="var">m</span> (<span class="id" title="definition">Asm.eval_addrmode</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <span class="id" title="var">a</span> <span class="id" title="var">rs</span>) (<span class="id" title="var">rs</span> <span class="id" title="var">rd</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqo</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.eval_addrmode</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <span class="id" title="var">a</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqo</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="goto_label_data_preserved"><span class="id" title="lemma">goto_label_data_preserved</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">f</span>: <span class="id" title="record">Asm.function</span>) <span class="id" title="var">l</span> <span class="id" title="var">rs</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">rs&acute;</span> <span class="id" title="var">m&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Asm.goto_label</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.goto_label</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.label_pos</span> <span class="id" title="var">l</span> 0 (<span class="id" title="projection">Asm.fn_code</span> <span class="id" title="var">f</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rs</span> <span class="id" title="constructor">Asm.PC</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exec_instr_data_preserved"><span class="id" title="lemma">exec_instr_data_preserved</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span>: <span class="id" title="record">Asm.function</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span>: <span class="id" title="inductive">Asm.instruction</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs</span>: <span class="id" title="definition">Asm.regset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs&acute;</span>: <span class="id" title="definition">Asm.regset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">m&acute;</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">EXEC_INSTR</span>: <span class="id" title="definition">Asm.exec_instr</span> (<span class="id" title="var">Hfl</span> := <span class="id" title="instance">Asm.FindLabels_instance_0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">MemAccessors0</span> := <span class="id" title="instance">Asm.mem_accessors_default</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Asm.Next</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_load_data_preserved"><span class="id" title="lemma">exec_load_data_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_store_data_preserved"><span class="id" title="lemma">exec_store_data_preserved</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#goto_label_data_preserved"><span class="id" title="lemma">goto_label_data_preserved</span></a>; <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Val.divu</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EAX</span>)) (<span class="id" title="definition">Asm.Pregmap.set</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EDX</span>) <span class="id" title="constructor">Vundef</span> <span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="var">r1</span>))); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Val.modu</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EAX</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">Asm.Pregmap.set</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EDX</span>) <span class="id" title="constructor">Vundef</span> <span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="var">r1</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <span class="id" title="definition">Val.divs</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EAX</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">Asm.Pregmap.set</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EDX</span>) <span class="id" title="constructor">Vundef</span> <span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="var">r1</span>))); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <span class="id" title="definition">Val.mods</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EAX</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">Asm.Pregmap.set</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.EDX</span>) <span class="id" title="constructor">Vundef</span> <span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="var">r1</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.eval_testcond</span> <span class="id" title="var">c</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.eval_testcond</span> <span class="id" title="var">c</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#goto_label_data_preserved"><span class="id" title="lemma">goto_label_data_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.eval_testcond</span> <span class="id" title="var">c1</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Asm.eval_testcond</span> <span class="id" title="var">c2</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#goto_label_data_preserved"><span class="id" title="lemma">goto_label_data_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="var">r</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Coqlib.list_nth_z</span> <span class="id" title="var">tbl</span> (<span class="id" title="definition">Int.unsigned</span> <span class="id" title="var">i</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#goto_label_data_preserved"><span class="id" title="lemma">goto_label_data_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.exec_instr</span> <span class="id" title="keyword">in</span> <span class="id" title="var">EXEC_INSTR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">Mem.alloc</span> <span class="id" title="var">m</span> 0 <span class="id" title="var">sz</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Halloc</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Mem.storev</span> <span class="id" title="constructor">Mint32</span> <span class="id" title="var">m0</span> (<span class="id" title="definition">Val.add</span> (<span class="id" title="constructor">Vptr</span> <span class="id" title="var">b</span> <span class="id" title="definition">Int.zero</span>) (<span class="id" title="constructor">Vint</span> <span class="id" title="var">ofs_link</span>)) (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>))) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hstorelink</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Mem.storev</span> <span class="id" title="constructor">Mint32</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">Val.add</span> (<span class="id" title="constructor">Vptr</span> <span class="id" title="var">b</span> <span class="id" title="definition">Int.zero</span>) (<span class="id" title="constructor">Vint</span> <span class="id" title="var">ofs_ra</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs</span> <span class="id" title="constructor">Asm.RA</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hstorera</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Halloc</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hstorelink</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hstorera</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Asm.exec_instr</span> <span class="id" title="keyword">in</span> <span class="id" title="var">EXEC_INSTR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Mem.loadv</span> <span class="id" title="constructor">Mint32</span> <span class="id" title="var">m</span> (<span class="id" title="definition">Val.add</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>)) (<span class="id" title="constructor">Vint</span> <span class="id" title="var">ofs_ra</span>))); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Mem.loadv</span> <span class="id" title="constructor">Mint32</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">Val.add</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>)) (<span class="id" title="constructor">Vint</span> <span class="id" title="var">ofs_link</span>))); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rs</span> (<span class="id" title="constructor">Asm.IR</span> <span class="id" title="constructor">Asm.ESP</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="method">Mem.free</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span> 0 <span class="id" title="var">sz</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfree</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="external_call_kernel_mode"><span class="id" title="lemma">external_call_kernel_mode</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ef</span> <span class="id" title="var">args</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">t</span> <span class="id" title="var">vl</span> <span class="id" title="var">m&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">external_call&acute;</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="definition">block</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#ef"><span class="id" title="variable">ef</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#vl"><span class="id" title="variable">vl</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ef</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#builtin_functions_kernel_mode"><span class="id" title="lemma">builtin_functions_kernel_mode</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#inline_assembly_kernel_mode"><span class="id" title="lemma">inline_assembly_kernel_mode</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#external_functions_kernel_mode"><span class="id" title="method">external_functions_kernel_mode</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">lift_simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">lift_simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lift_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="step_data_kernel_mode"><span class="id" title="lemma">step_data_kernel_mode</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">rs</span> (<span class="id" title="var">m</span>: <span class="id" title="definition">mwd</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">t</span> <span class="id" title="var">rs&acute;</span> <span class="id" title="var">m&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">Asm.step</span> (<span class="id" title="var">MemAccessors0</span> := <span class="id" title="instance">Asm.mem_accessors_default</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.ge"><span class="id" title="variable">ge</span></a> (<span class="id" title="constructor">Asm.State</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#t"><span class="id" title="variable">t</span></a> (<span class="id" title="constructor">Asm.State</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#rs&acute;"><span class="id" title="variable">rs&acute;</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m&acute;"><span class="id" title="variable">m&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#external_call_kernel_mode"><span class="id" title="lemma">external_call_kernel_mode</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#exec_instr_data_preserved"><span class="id" title="lemma">exec_instr_data_preserved</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="transf_program_correct"><span class="id" title="lemma">transf_program_correct</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">lm</span> <span class="id" title="var">i</span> <span class="id" title="var">sg</span> <span class="id" title="var">args</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="record">Smallstep.forward_simulation</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">AsmX.semantics</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#lm"><span class="id" title="variable">lm</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.prog"><span class="id" title="variable">prog</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#PFLAsm.semantics"><span class="id" title="definition">PFLAsm.semantics</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#lm"><span class="id" title="variable">lm</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE.tprog"><span class="id" title="variable">tprog</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#sg"><span class="id" title="variable">sg</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#m"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Smallstep.forward_simulation_step</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">match_states</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> ⇒ <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#s1"><span class="id" title="variable">s1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">Asm.State</span> <span class="id" title="var">_</span> <span class="id" title="var">m</span> ⇒ <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#kernel_mode"><span class="id" title="method">kernel_mode</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_data</span> <span class="id" title="var">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">esplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#symbols_preserved"><span class="id" title="lemma">symbols_preserved</span></a>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> 2; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s1&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> 6 <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#step_stepex"><span class="id" title="lemma">step_stepex</span></a>, <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#step_data_kernel_mode"><span class="id" title="lemma">step_data_kernel_mode</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.layerlib.LAsmgenproof.html#WITHKERNELMODE"><span class="id" title="section">WITHKERNELMODE</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>