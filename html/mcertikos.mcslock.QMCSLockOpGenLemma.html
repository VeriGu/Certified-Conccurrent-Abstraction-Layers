<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>mcertikos.mcslock.QMCSLockOpGenLemma</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library mcertikos.mcslock.QMCSLockOpGenLemma</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coqlib</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Errors</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">AST</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Integers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Floats</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Op</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Asm</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Events</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Globalenvs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Smallstep</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Values</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Memory</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Maps</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.CommonTactic.html#"><span class="id" title="library">CommonTactic</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.AuxLemma.html#"><span class="id" title="library">AuxLemma</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.flatmem.FlatMemory.html#"><span class="id" title="library">FlatMemory</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.AuxStateDataType.html#"><span class="id" title="library">AuxStateDataType</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.Constant.html#"><span class="id" title="library">Constant</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.GlobIdent.html#"><span class="id" title="library">GlobIdent</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.clib.RealParams.html#"><span class="id" title="library">RealParams</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.flatmem.LoadStoreSem1.html#"><span class="id" title="library">LoadStoreSem1</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.AsmImplLemma.html#"><span class="id" title="library">AsmImplLemma</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.LAsm.html#"><span class="id" title="library">LAsm</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.RefinementTactic.html#"><span class="id" title="library">RefinementTactic</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.PrimSemantics.html#"><span class="id" title="library">PrimSemantics</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.logic.PTreeModules</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.logic.LayerLogicImpl</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compcertx.Stencil</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compcertx.MakeProgram</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatLayers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">liblayers.compat.CompatGenSem</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">compcert.cfrontend.Ctypes</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.LayerCalculusLemma.html#"><span class="id" title="library">LayerCalculusLemma</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#"><span class="id" title="library">ListLemma2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.clib.ZSet.html#"><span class="id" title="library">ZSet</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.objects.AbstractDataType.html#"><span class="id" title="library">AbstractDataType</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#"><span class="id" title="library">CalMCSLock</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.mcslock.CalMCSLockLemmas.html#"><span class="id" title="library">CalMCSLockLemmas</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#"><span class="id" title="library">QMCSLockOpGenDef</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="QSMCSLAYERAUXLEMMA"><span class="id" title="section">QSMCSLAYERAUXLEMMA</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">error_monad_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="tail_id_of_tail"><span class="id" title="lemma">tail_id_of_tail</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>,<span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="tail_soundness"><span class="id" title="lemma">tail_soundness</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <span class="id" title="keyword">∀</span> <span class="id" title="var">p</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span>, <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>) → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[? ? ?] |]; [ | <span class="id" title="var">now</span> <span class="id" title="tactic">congruence</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#init_MCSLock"><span class="id" title="definition">init_MCSLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tail_id_of_tail"><span class="id" title="lemma">tail_id_of_tail</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">lock_array</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">tail</span> <span class="id" title="keyword">with</span> <span class="id" title="var">p</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">tail</span> <span class="id" title="var">lock_array</span> <span class="id" title="var">bounds</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">lock_array</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">z</span> <span class="id" title="var">lock_array</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">tail</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_not_NULL"><span class="id" title="lemma">Q_CalMCSLock_not_NULL</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">in_app</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="tail_id_In"><span class="id" title="lemma">tail_id_In</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">q</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a>) → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">qt</span> <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt&acute;</span> <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">qt&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">blah</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_id_nonnil"><span class="id" title="lemma">Q_CalMCSLock_tail_id_nonnil</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a> → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">q0</span> <span class="id" title="var">s</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt</span> <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">qt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt&acute;</span> <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">qt&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">blah</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q2</span> [<span class="id" title="var">s&acute;</span> [<span class="id" title="var">bi</span> <span class="id" title="var">IH</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">tid</span> <span class="id" title="var">bound</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">q2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_id_nil&acute;"><span class="id" title="lemma">Q_CalMCSLock_tail_id_nil&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a>) → <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt</span> <span class="id" title="var">q</span>];  <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt&acute;</span> <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">qt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">qt&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">blah</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">qt&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_id_nil"><span class="id" title="lemma">Q_CalMCSLock_tail_id_nil</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_tail_id_nil&acute;"><span class="id" title="lemma">Q_CalMCSLock_tail_id_nil&acute;</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_not_NULL"><span class="id" title="lemma">Q_CalMCSLock_not_NULL</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_completeness"><span class="id" title="lemma">Q_CalMCSLock_completeness</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">mcs</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#mcs"><span class="id" title="variable">mcs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">tail0</span> <span class="id" title="var">la</span>] <span class="id" title="var">IH</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">z</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Htail</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tail_soundness"><span class="id" title="lemma">tail_soundness</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IH</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Htail</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">tail0</span> <span class="id" title="var">i</span>); [<span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#NoDup"><span class="id" title="inductive">NoDup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#NoDup_app_commute"><span class="id" title="lemma">NoDup_app_commute</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> ((<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a>    <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> ((<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHpre</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">IHQ_CalMCSLock</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_functional&acute;&acute;&acute;"><span class="id" title="lemma">Q_CalMCSLock_functional&acute;&acute;&acute;</span></a> :  <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">pre</span> <span class="id" title="var">pre&acute;</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">post</span> <span class="id" title="var">post&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a>) → (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a>) → (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post&acute;"><span class="id" title="variable">post&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre&acute;</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">contradict</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre&acute;</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">contradict</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHpre</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">pre&acute;</span>:=<span class="id" title="var">pre&acute;</span>) (<span class="id" title="var">post</span>:=<span class="id" title="var">post</span>) (<span class="id" title="var">post&acute;</span>:=<span class="id" title="var">post&acute;</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_functional&acute;&acute;"><span class="id" title="lemma">Q_CalMCSLock_functional&acute;&acute;</span></a> :  <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">pre</span> <span class="id" title="var">pre&acute;</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">post</span> <span class="id" title="var">post&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a>) → (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post&acute;"><span class="id" title="variable">post&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post&acute;"><span class="id" title="variable">post&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre&acute;</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">contradict</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">contradict</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">a0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">a</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHpre</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<span class="id" title="var">b</span>) (<span class="id" title="var">c</span>:=<span class="id" title="var">c</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_functional&acute;"><span class="id" title="lemma">Q_CalMCSLock_functional&acute;</span></a> :  <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">pre</span> <span class="id" title="var">pre&acute;</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">a&acute;</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">post</span> <span class="id" title="var">post&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a>) → (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a>) → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a&acute;"><span class="id" title="variable">a&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a&acute;"><span class="id" title="variable">a&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post&acute;"><span class="id" title="variable">post&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre&acute;"><span class="id" title="variable">pre&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a&acute;"><span class="id" title="variable">a&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post&acute;"><span class="id" title="variable">post&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a>  <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post&acute;</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a>  <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post&acute;</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional&acute;&acute;"><span class="id" title="lemma">Q_CalMCSLock_functional&acute;&acute;</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">in_app</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">in_app</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a>  <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post&acute;</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">a&acute;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a>  <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post&acute;</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>; (<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> ( <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> <span class="id" title="keyword">in</span> ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intuition</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">use_NoDup</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [|- (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">i</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>)] ⇒ <span class="id" title="tactic">intros</span> <span class="id" title="var">blah</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#In_map"><span class="id" title="lemma">In_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a>) <span class="id" title="keyword">in</span> <span class="id" title="var">blah</span>; <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [|- <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">i</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">intros</span> <span class="id" title="var">blah</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">blah</span>; <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [|- ?<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">_</span>  ] ⇒ <span class="id" title="tactic">intros</span> <span class="id" title="var">blah</span>; <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">j</span>   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">HA</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">HB</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">pose</span> (<span class="id" title="var">e</span>:= <span class="id" title="var">IHl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA</span> <span class="id" title="var">HB</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">H_bi_bi0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span>    (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a>  <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional&acute;&acute;&acute;"><span class="id" title="lemma">Q_CalMCSLock_functional&acute;&acute;&acute;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">pre</span>:=<span class="id" title="var">pre0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pre&acute;</span>:=<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">post</span>  := <span class="id" title="var">post0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">post&acute;</span> := <span class="id" title="var">post</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">use_NoDup</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_bi_bi0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">bi0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">bi</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional&acute;"><span class="id" title="lemma">Q_CalMCSLock_functional&acute;</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=(<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">use_NoDup</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="var">la</span> : <span class="id" title="definition">ZMap.t</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) (<span class="id" title="var">q</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">q&acute;</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s&acute;</span> <span class="id" title="var">i&acute;</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="keyword">match</span> <span class="id" title="var">s&acute;</span> <span class="id" title="keyword">with</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> ⇒ <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a> | <span class="id" title="var">_</span> ⇒ <span class="id" title="var">i&acute;</span> <span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <span class="id" title="var">q&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="next_correct_BEFORE_SET_NEXT"><span class="id" title="lemma">next_correct_BEFORE_SET_NEXT</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">la</span> <span class="id" title="var">q</span> <span class="id" title="var">k</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="definition">ZMap.set</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">b0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">k</span> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">IHq</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|[? ? ?] <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|[? ? ?] <span class="id" title="var">q</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> (@<span class="id" title="lemma">ZMap.gso</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">k</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="next_correct_preserved_not_In"><span class="id" title="lemma">next_correct_preserved_not_In</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span> <span class="id" title="var">s</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="definition">ZMap.set</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [| [<span class="id" title="var">s&acute;</span> <span class="id" title="var">i&acute;</span> <span class="id" title="var">bi&acute;</span>] <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <span class="id" title="var">s</span> <span class="id" title="var">la</span>) <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">IHq</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|[? ? ?] <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|[? ? ?] <span class="id" title="var">q</span>]; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="next_correct_SET_NEXT&acute;"><span class="id" title="lemma">next_correct_SET_NEXT&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">la</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="keyword">let</span> (<span class="id" title="var">b</span>, <span class="id" title="var">_</span>) := <span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <span class="id" title="keyword">in</span> <span class="id" title="definition">ZMap.set</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span> <span class="id" title="var">NC</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span>  (<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">post</span> <span class="id" title="keyword">as</span> [| [<span class="id" title="var">s&acute;</span> <span class="id" title="var">i&acute;</span> <span class="id" title="var">bi&acute;</span>] <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">NC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">NC</span> <span class="id" title="keyword">as</span> [? [? ?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct_preserved_not_In"><span class="id" title="lemma">next_correct_preserved_not_In</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NC</span> <span class="id" title="keyword">as</span> [? [? ?]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="next_correct_SET_NEXT"><span class="id" title="lemma">next_correct_SET_NEXT</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">la</span> <span class="id" title="var">pre</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> (<span class="id" title="keyword">let</span> (<span class="id" title="var">b</span>, <span class="id" title="var">_</span>) := <span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <span class="id" title="keyword">in</span> <span class="id" title="definition">ZMap.set</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct_SET_NEXT&acute;"><span class="id" title="lemma">next_correct_SET_NEXT&acute;</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHpre</span> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hj_not_a</span> <span class="id" title="tactic">by</span> <span class="id" title="var">use_NoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">z</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s&acute;</span> <span class="id" title="var">i&acute;</span> <span class="id" title="var">bi&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <span class="id" title="var">la</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">H_next_correct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ((<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)) <span class="id" title="keyword">as</span> [|[? ? ?] <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> ((<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)))) <span class="id" title="keyword">as</span> <span class="id" title="var">H_NoDup</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">IH</span> := <span class="id" title="var">IHpre</span> <span class="id" title="var">H_next_correct</span> <span class="id" title="var">H_NoDup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHpre</span> <span class="id" title="var">H_next_correct</span> <span class="id" title="var">H_NoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [|[? ? ?] <span class="id" title="var">q</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="next_correct_GET_BUSY_false"><span class="id" title="lemma">next_correct_GET_BUSY_false</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">la</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="next_correct_equiv_la"><span class="id" title="lemma">next_correct_equiv_la</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">la</span> <span class="id" title="var">la&acute;</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la&acute;"><span class="id" title="variable">la&acute;</span></a>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la&acute;"><span class="id" title="variable">la&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">la</span> <span class="id" title="var">la&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [ |[? ? ? ] [|[? ? ?] ?]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hequiv</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_next_correct"><span class="id" title="lemma">Q_CalMCSLock_next_correct</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <span class="id" title="keyword">∀</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span>, <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct"><span class="id" title="definition">next_correct</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>)<span class="id" title="keyword">as</span> [[<span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>] | ]; [ | <span class="id" title="var">now</span> <span class="id" title="tactic">congruence</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |-<span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>), <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct_BEFORE_SET_NEXT"><span class="id" title="lemma">next_correct_BEFORE_SET_NEXT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">IHQ_CalMCSLock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NC</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct_SET_NEXT"><span class="id" title="lemma">next_correct_SET_NEXT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHQ_CalMCSLock</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">tp0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">t</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>) <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">NC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>  <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct_GET_BUSY_false"><span class="id" title="lemma">next_correct_GET_BUSY_false</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b0</span> <span class="id" title="var">t0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">la0</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> (<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">t&acute;</span>) := <span class="id" title="definition">ZMap.get</span> <span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="keyword">in</span> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">t0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#t&acute;"><span class="id" title="variable">t&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hla_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">t0</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">k</span> <span class="id" title="var">la0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">t0</span> <span class="id" title="var">la0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">t0</span> <span class="id" title="var">la0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">t0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>)) <span class="id" title="keyword">with</span> <span class="id" title="var">la</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">tp0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">t</span> <span class="id" title="keyword">in</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#next_correct_equiv_la"><span class="id" title="lemma">next_correct_equiv_la</span></a> <span class="id" title="var">la0</span> <span class="id" title="var">la</span> ( (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><span class="id" title="var">q</span>)) <span class="id" title="var">Hla_equiv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">t</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="Q_CalMCSLock_next_correct_at_head"><span class="id" title="lemma">Q_CalMCSLock_next_correct_at_head</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">tp</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span>, <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tp"><span class="id" title="variable">tp</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">q</span> <span class="id" title="var">HQ_Cal</span> <span class="id" title="var">tp</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span> <span class="id" title="var">HCal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NC</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_next_correct"><span class="id" title="lemma">Q_CalMCSLock_next_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQ_Cal</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HCal</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">NC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NC</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="ZMap_get_set_fst"><span class="id" title="lemma">ZMap_get_set_fst</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>  <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">x</span> (<span class="id" title="var">la</span> : <span class="id" title="definition">ZMap.t</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#B"><span class="id" title="variable">B</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<span class="id" title="definition">ZMap.set</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.ZArith.ZArith_dec.html#Z_eq_dec"><span class="id" title="abbreviation">Z_eq_dec</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>;  <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span> | <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>] ; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="ZMap_get_set_fst&acute;"><span class="id" title="lemma">ZMap_get_set_fst&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>  <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">x</span> (<span class="id" title="var">la</span> : <span class="id" title="definition">ZMap.t</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#B"><span class="id" title="variable">B</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<span class="id" title="definition">ZMap.set</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.ZArith.ZArith_dec.html#Z_eq_dec"><span class="id" title="abbreviation">Z_eq_dec</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>;  <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span> | <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>] ; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_head_not_busy"><span class="id" title="lemma">Q_CalMCSLock_head_not_busy</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">q0</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span>, <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>] |]; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> ((<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">qt</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i0</span> <span class="id" title="var">bi</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">qt</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i0</span> <span class="id" title="var">bi</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">q0</span> := <span class="id" title="var">q</span>) (<span class="id" title="var">t</span> := <span class="id" title="var">t0</span>) (<span class="id" title="var">bi0</span> := <span class="id" title="var">bi</span>) (<span class="id" title="var">tq</span> := <span class="id" title="var">tq0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">q0</span> := <span class="id" title="var">q0</span>) (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">bi</span> := <span class="id" title="var">bi</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[? ? ?]|]; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>] |]; [|<span class="id" title="tactic">congruence</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i0</span> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i0</span> <span class="id" title="var">la0</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hget</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ZMap_get_set_fst"><span class="id" title="lemma">ZMap_get_set_fst</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b&acute;</span> <span class="id" title="var">t&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> ((<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">b&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hget</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">p</span> <span class="id" title="var">pre</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">q0</span> :=  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) (<span class="id" title="var">t</span> := <span class="id" title="var">t0</span>) (<span class="id" title="var">bi</span>:=<span class="id" title="var">bi0</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">q0</span> := <span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) (<span class="id" title="var">t</span> := <span class="id" title="var">t0</span>) (<span class="id" title="var">bi</span>:=<span class="id" title="var">bi0</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) (<span class="id" title="var">bi</span>:=<span class="id" title="var">bi</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[? ? ?]|]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) (<span class="id" title="var">q0</span>:=<span class="id" title="var">q0</span>) (<span class="id" title="var">bi0</span>:=<span class="id" title="var">bi</span>)  (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[? ?]|]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NC</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_next_correct_at_head"><span class="id" title="lemma">Q_CalMCSLock_next_correct_at_head</span></a> <span class="id" title="var">l</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">q</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NC&acute;</span> := <span class="id" title="var">NC</span> <span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="tactic">clear</span> <span class="id" title="var">NC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">z1</span> <span class="id" title="var">t1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">NC&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span> ) <span class="id" title="keyword">as</span> [<span class="id" title="var">z2</span> <span class="id" title="var">t2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">i0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) (<span class="id" title="var">q0</span>:=<span class="id" title="var">q0</span>) (<span class="id" title="var">bi</span>:=<span class="id" title="var">bi</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[? ? ?]|]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) (<span class="id" title="var">q0</span>:=<span class="id" title="var">q0</span>) (<span class="id" title="var">bi0</span>:=<span class="id" title="var">bi</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[? ? ?]|]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_is_busy_SWAP_not_nil&acute;"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy_SWAP_not_nil&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">x</span>:<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">l</span> <span class="id" title="var">y</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) → (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#y"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_is_busy_SWAP_not_nil"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy_SWAP_not_nil</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">x</span>:<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">l</span> <span class="id" title="var">y</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#tl"><span class="id" title="definition">tl</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)) → (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#tl"><span class="id" title="definition">tl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#y"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_tail_is_busy_SWAP_not_nil&acute;"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy_SWAP_not_nil&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_is_busy_SET_NEXT"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy_SET_NEXT</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">pre</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> (<span class="id" title="var">post</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QThread"><span class="id" title="inductive">QThread</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHpre</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_is_busy"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <span class="id" title="keyword">∀</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span>, <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#tail"><span class="id" title="abbreviation">tail</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>)) → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. &nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>. &nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|] ; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_tail_is_busy_SWAP_not_nil"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy_SWAP_not_nil</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">i0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ZMap_get_set_fst&acute;"><span class="id" title="lemma">ZMap_get_set_fst&acute;</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gss</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|] ; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">la</span>:=<span class="id" title="var">la</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|] ; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i0</span> <span class="id" title="var">la0</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i0</span> ((<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>)))) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ZMap_get_set_fst"><span class="id" title="lemma">ZMap_get_set_fst</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b1</span> <span class="id" title="var">t1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> ((<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">b1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">la</span>:=<span class="id" title="var">la0</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_tail_is_busy_SET_NEXT"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy_SET_NEXT</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|] ; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">la</span>:=<span class="id" title="var">la</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq0</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|] ; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">la</span>:=<span class="id" title="var">la</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq0</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnext_correct</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_next_correct_at_head"><span class="id" title="lemma">Q_CalMCSLock_next_correct_at_head</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>); [ | <span class="id" title="var">now</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">Hnext_correct</span> <span class="id" title="keyword">with</span> <span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">t0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">t0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> (<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hnext_correct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hnext_correct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">j</span> <span class="id" title="var">la0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">la</span> <span class="id" title="keyword">with</span> (<span class="id" title="definition">ZMap.set</span> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">la0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ZMap.gso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="var">tp0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">use_NoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t0</span> <span class="id" title="var">la0</span> <span class="id" title="var">tq0</span>]|] ; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHQ_CalMCSLock</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">la</span>:=<span class="id" title="var">la</span>) (<span class="id" title="var">tq</span>:=<span class="id" title="var">tq0</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subdestruct</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHQ_CalMCSLock</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_not_INSIDE"><span class="id" title="lemma">Q_CalMCSLock_tail_not_INSIDE</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#tail"><span class="id" title="abbreviation">tail</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [|- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#tl"><span class="id" title="definition">tl</span></a> (?<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>))<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>] ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">in_app</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">intuition</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCS_NoDup_injectivity&acute;"><span class="id" title="lemma">Q_CalMCS_NoDup_injectivity&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">s</span> <span class="id" title="var">s&acute;</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">bi&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi&acute;"><span class="id" title="variable">bi&acute;</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi&acute;"><span class="id" title="variable">bi&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s&acute;</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">bi&acute;</span> <span class="id" title="var">HNoDup</span> <span class="id" title="var">HIn1</span> <span class="id" title="var">HIn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span> <span class="id" title="keyword">as</span> [|? ? <span class="id" title="var">HNoDup1</span> <span class="id" title="var">HNoDup2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HIn1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HIn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#In_map"><span class="id" title="lemma">In_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a>) <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HNoDup1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#In_map"><span class="id" title="lemma">In_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a>) <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HNoDup1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHq</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<span class="id" title="var">i</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCS_NoDup_injectivity"><span class="id" title="lemma">Q_CalMCS_NoDup_injectivity</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">s</span> <span class="id" title="var">s&acute;</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">bi&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi&acute;"><span class="id" title="variable">bi&acute;</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s&acute;"><span class="id" title="variable">s&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi&acute;"><span class="id" title="variable">bi&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCS_NoDup_injectivity&acute;"><span class="id" title="lemma">Q_CalMCS_NoDup_injectivity&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_inv_cons"><span class="id" title="lemma">Q_CalMCSLock_inv_cons</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">q0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_multistep"><span class="id" title="lemma">other_threads_multistep</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> (<span class="id" title="var">P</span> :<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a> → <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l&acute;</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">k</span> <span class="id" title="var">e</span>] <span class="id" title="var">l&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">q&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">Hstep</span> <span class="id" title="var">HCal_l</span> <span class="id" title="var">HCal_l&acute;</span> <span class="id" title="var">Hdisjoint</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_inv_cons"><span class="id" title="lemma">Q_CalMCSLock_inv_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HCal_l&acute;</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q0</span> <span class="id" title="var">H_q0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">with</span>  (<span class="id" title="var">e</span>:=<span class="id" title="var">e</span>) (<span class="id" title="var">k</span>:=<span class="id" title="var">k</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><span class="id" title="var">l</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdisjoint</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">e0</span>:=<span class="id" title="var">e</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_WAITING_BUSY&acute;"><span class="id" title="lemma">other_threads_preserve_WAITING_BUSY&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>  <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>      →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">H</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HCal&acute;</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">in_app</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_WAITING_BUSY"><span class="id" title="lemma">other_threads_preserve_WAITING_BUSY</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l&acute;</span> <span class="id" title="keyword">as</span> [| [<span class="id" title="var">k</span> <span class="id" title="var">e</span>] <span class="id" title="var">l&acute;</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">replace</span> <span class="id" title="var">q&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_inv_cons"><span class="id" title="lemma">Q_CalMCSLock_inv_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q0</span> <span class="id" title="var">H_q0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_WAITING_BUSY&acute;"><span class="id" title="lemma">other_threads_preserve_WAITING_BUSY&acute;</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span>:=<span class="id" title="var">e</span>) (<span class="id" title="var">k</span>:=<span class="id" title="var">k</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><span class="id" title="var">l</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">with</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">auto</span>. }            <br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem_spec"><span class="id" title="lemma">ZSet.mem_spec</span></a> <a class="idref" href="mcertikos.clib.ZSet.html#not_eq_true"><span class="id" title="lemma">not_eq_true</span></a> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.add_spec"><span class="id" title="lemma">ZSet.add_spec</span></a> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.union_spec"><span class="id" title="lemma">ZSet.union_spec</span></a> : <span class="id" title="var">zset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_zset</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">progress</span> (<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">zset</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span>: <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.In"><span class="id" title="definition">ZSet.In</span></a> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.empty"><span class="id" title="definition">ZSet.empty</span></a> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.empty_spec"><span class="id" title="lemma">ZSet.empty_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|    [ |- ?<span class="id" title="var">X</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">Y</span> ] ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.eq_leibniz"><span class="id" title="lemma">ZSet.eq_leibniz</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">intuition</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slowset_of_QMCSLockState_app"><span class="id" title="lemma">slowset_of_QMCSLockState_app</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.union"><span class="id" title="definition">ZSet.union</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [ | [ [ | | ] ? ?]]; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHq</span>; <span class="id" title="var">solve_zset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_not_slow&acute;"><span class="id" title="lemma">other_threads_preserve_not_slow&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_of_QMCSLockState_app"><span class="id" title="lemma">slowset_of_QMCSLockState_app</span></a>; <span class="id" title="var">solve_zset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_of_QMCSLockState_app"><span class="id" title="lemma">slowset_of_QMCSLockState_app</span></a> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="var">solve_zset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_not_slow"><span class="id" title="lemma">other_threads_preserve_not_slow</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_multistep"><span class="id" title="lemma">other_threads_multistep</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">P</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) (<span class="id" title="var">i</span>:=<span class="id" title="var">i</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">l&acute;</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_not_slow&acute;"><span class="id" title="lemma">other_threads_preserve_not_slow&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_MCSLockThreadState_eq_dec"><span class="id" title="lemma">Q_MCSLockThreadState_eq_dec</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">s</span> <span class="id" title="var">s&acute;</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockThreadState"><span class="id" title="inductive">Q_MCSLockThreadState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s&acute;"><span class="id" title="variable">s&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s&acute;"><span class="id" title="variable">s&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="QSMCSLAYERAUXLEMMA.WITH_WAIT_TIME"><span class="id" title="section">WITH_WAIT_TIME</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="mcertikos.objects.LogReplay.html#"><span class="id" title="library">LogReplay</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">waittime</span>: <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#WaitTime"><span class="id" title="class">WaitTime</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CalMCS_QSCal_bound"><span class="id" title="lemma">CalMCS_QSCal_bound</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">tailptr</span> <span class="id" title="var">la</span> <span class="id" title="var">bounds</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tailptr"><span class="id" title="variable">tailptr</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bounds"><span class="id" title="variable">bounds</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bounds"><span class="id" title="variable">bounds</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span>&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#init_MCSLock"><span class="id" title="definition">init_MCSLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#init_MCSLock"><span class="id" title="definition">init_MCSLock</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> | <span class="id" title="var">e</span> ]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="var">eqn</span>:?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>;            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span> [<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> ?<span class="id" title="var">lis</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <span class="id" title="var">lis</span>) <span class="id" title="keyword">as</span> [[[[[[? ?] ?] ?] ?] ?] |] <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">_</span> | (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">if</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [? ? ?] <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LEMPTY"><span class="id" title="constructor">LEMPTY</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LGET"><span class="id" title="constructor">LGET</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LHOLD"><span class="id" title="constructor">LHOLD</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="definition">ZMap.get</span> ?<span class="id" title="var">X</span> ?<span class="id" title="var">Y</span>] |- <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [? ? ?] <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="QS_CalLock_q_nil_same"><span class="id" title="lemma">QS_CalLock_q_nil_same</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> → (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.CalMCSLockLemmas.html#QS_CalLock_q_length_same"><span class="id" title="lemma">QS_CalLock_q_length_same</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">tq</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wait_lock_CalMCS_AcqWait"><span class="id" title="lemma">wait_lock_CalMCS_AcqWait</span></a> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">o</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_mcs_qs_oracle"><span class="id" title="inductive">relate_mcs_qs_oracle</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock_oracle"><span class="id" title="definition">get_free_qslock_oracle</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">hl</span> <span class="id" title="var">hl&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QState_of_QMCSLockState"><span class="id" title="inductive">QState_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitGet"><span class="id" title="definition">QS_CalWaitGet</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCS_AcqWait"><span class="id" title="definition">CalMCS_AcqWait</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#correct_qslock_status"><span class="id" title="definition">correct_qslock_status</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LockOwn"><span class="id" title="constructor">LockOwn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCS_AcqWait"><span class="id" title="definition">CalMCS_AcqWait</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitGet"><span class="id" title="definition">QS_CalWaitGet</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">o</span> <span class="id" title="var">Hrelate_oracle</span> <span class="id" title="var">Hvalid_oracle</span> <span class="id" title="var">Hfree_oracle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span> <span class="id" title="var">hl&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">HQCalMCS</span> <span class="id" title="var">HIn</span> <span class="id" title="var">H_not_slow</span> <span class="id" title="var">HQCal</span> <span class="id" title="var">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrelate_oracle</span>. <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">hl1</span> := <span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">hl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hrelate_log1</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> <span class="id" title="var">hl1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hrelate_mcs_qs_oracle_res</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#RELATE_QS_MCS_LOG"><span class="id" title="constructor">RELATE_QS_MCS_LOG</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrelate_log1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q1</span> <span class="id" title="var">HQCalMCS1</span> <span class="id" title="var">HQCal1</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>) <span class="id" title="var">q1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HIn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_WAITING_BUSY"><span class="id" title="lemma">other_threads_preserve_WAITING_BUSY</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">hl</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hvalid_oracle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid_oracle</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_not_slow1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_not_slow"><span class="id" title="lemma">other_threads_preserve_not_slow</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">hl</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hvalid_oracle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hvalid_oracle</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> <span class="id" title="var">hl1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfree1</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">Hfree_oracle</span>; <span class="id" title="tactic">assumption</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">hl</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">hl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">hl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">hl</span> <span class="id" title="var">q</span> <span class="id" title="var">HQCalMCS</span> <span class="id" title="var">HQCal</span> <span class="id" title="var">Hfree</span> <span class="id" title="var">HIn</span> <span class="id" title="var">H_not_slow</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_completeness"><span class="id" title="lemma">Q_CalMCSLock_completeness</span></a> <span class="id" title="var">hl1</span> <span class="id" title="var">q1</span> <span class="id" title="var">HQCalMCS1</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t</span> <span class="id" title="var">la</span>] <span class="id" title="var">Ht_la</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht_la</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HQCal1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c1</span> <span class="id" title="var">rel_c1</span> <span class="id" title="var">b1</span> <span class="id" title="var">qs1</span> <span class="id" title="var">slow1</span> <span class="id" title="var">tq1</span> <span class="id" title="var">Hb1</span> <span class="id" title="var">Hqs1</span> <span class="id" title="var">Hslow1</span>  <span class="id" title="var">Htq1</span> <span class="id" title="var">HQCal1_inv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal1_inv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q1</span> <span class="id" title="keyword">as</span> [| [<span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span>] <span class="id" title="var">q1_tail</span>]; [<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span> | ].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hbusy_head</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_head_not_busy"><span class="id" title="lemma">Q_CalMCSLock_head_not_busy</span></a> <span class="id" title="var">hl1</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>) <span class="id" title="var">HQCalMCS1</span> <span class="id" title="var">i</span> <span class="id" title="var">bj</span> <span class="id" title="var">q1_tail</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">bounds</span> <span class="id" title="var">Ht_la</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hbusy_tail</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_tail_is_busy"><span class="id" title="lemma">Q_CalMCSLock_tail_is_busy</span></a> <span class="id" title="var">hl1</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><span class="id" title="var">q1_tail</span>) <span class="id" title="var">HQCalMCS1</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">bounds</span> <span class="id" title="var">Ht_la</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la</span>) <span class="id" title="keyword">as</span> [[|] <span class="id" title="var">next</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hbusy_head</span>, <span class="id" title="var">Hbusy_tail</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>) <span class="id" title="var">q1_tail</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HIn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="tactic">by</span>  (<span class="id" title="tactic">apply</span> <span class="id" title="var">Hbusy_head</span>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}            <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_MCSLockThreadState_eq_dec"><span class="id" title="lemma">Q_MCSLockThreadState_eq_dec</span></a> <span class="id" title="var">s</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span>|<span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hbusy_head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HIn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCalMCS1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCalMCS1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span>  <span class="id" title="var">HQCalMCS1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#In_map"><span class="id" title="lemma">In_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a>) <span class="id" title="keyword">in</span> <span class="id" title="var">HIn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HIn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal1&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitGet"><span class="id" title="definition">QS_CalWaitGet</span></a> <span class="id" title="var">n</span> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) <span class="id" title="var">o</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">hl&acute;</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HCal1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal1&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_false</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal1&acute;</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HCal1&acute;</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QState_of_QMCSLockState"><span class="id" title="inductive">QState_of_QMCSLockState</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>) (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">HQCal2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_false</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hslow1</span>, <span class="id" title="var">H_not_slow1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tq1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">tq1_head</span> <span class="id" title="var">tq1_tail</span>]; [<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Htq1</span>; <span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hslow1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QSTATE_OF_QMCSLOCKSTATE"><span class="id" title="constructor">QSTATE_OF_QMCSLOCKSTATE</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>) <span class="id" title="var">self_c1</span> <span class="id" title="var">rel_c1</span> <span class="id" title="var">b1</span> <span class="id" title="var">qs1</span> <span class="id" title="var">slow1</span> (<span class="id" title="var">tq1_head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tq1_tail</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">HCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock_GET_BUSY_true"><span class="id" title="constructor">Q_CalMCSLock_GET_BUSY_true</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfree2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hcal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfree1</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">IHn</span> ((<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>))  <span class="id" title="var">hl&acute;</span>  <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> <span class="id" title="var">HCalMCS2</span> <span class="id" title="var">HIn1</span> <span class="id" title="var">H_not_slow1</span> <span class="id" title="var">HQCal2</span> <span class="id" title="var">Hfree2</span> <span class="id" title="var">HCal1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_sj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HIn1</span> <span class="id" title="keyword">as</span> [? | <span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#In_map"><span class="id" title="lemma">In_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a>) <span class="id" title="keyword">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hbusy_tail</span> <span class="id" title="var">HIn</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">j</span> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">bj</span> <span class="id" title="keyword">with</span> <span class="id" title="var">bi</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H_hl&acute;</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">hl&acute;</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tq1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#QS_CalLock_q_nil_same"><span class="id" title="lemma">QS_CalLock_q_nil_same</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal1_inv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tq1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">tq1_head</span> <span class="id" title="var">tq1_tail</span>]; [<span class="id" title="tactic">congruence</span>|].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_BUSY"><span class="id" title="constructor">GET_BUSY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">tq1_head</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalPassLockTime"><span class="id" title="definition">CalPassLockTime</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LHOLD"><span class="id" title="constructor">LHOLD</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">qs1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">slow1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">tq1_head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tq1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">HQCal2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span>, <span class="id" title="var">Hqs1</span>, <span class="id" title="var">Hb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">i</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#RELATE_QS_MCS_LOG"><span class="id" title="constructor">RELATE_QS_MCS_LOG</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock_GET_BUSY_false"><span class="id" title="constructor">Q_CalMCSLock_GET_BUSY_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QSTATE_OF_QMCSLOCKSTATE"><span class="id" title="constructor">QSTATE_OF_QMCSLOCKSTATE</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LHOLD"><span class="id" title="constructor">LHOLD</span></a> <span class="id" title="var">qs1</span> <span class="id" title="var">slow1</span> (<span class="id" title="var">tq1_head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tq1_tail</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#correct_qslock_status"><span class="id" title="definition">correct_qslock_status</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q1_tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">subdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Hcal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hfree1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal1_inv</span> <span class="id" title="var">Hb1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfree1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> (<span class="id" title="var">j</span> <span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">q</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">pre</span> <span class="id" title="var">s</span> <span class="id" title="var">bj</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_BEFORE_SET_NEXT&acute;&acute;"><span class="id" title="lemma">other_threads_preserve_BEFORE_SET_NEXT&acute;&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">j</span> <span class="id" title="var">i</span> <span class="id" title="var">pre</span> <span class="id" title="var">k</span> <span class="id" title="var">bk</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bk"><span class="id" title="variable">bk</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a>    <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bk"><span class="id" title="variable">bk</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre0</span> [<span class="id" title="var">s</span> [<span class="id" title="var">bj</span> [<span class="id" title="var">bi</span> [<span class="id" title="var">post0</span> <span class="id" title="var">Heq</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#split_lists"><span class="id" title="lemma">split_lists</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq</span>) <span class="id" title="keyword">as</span> [[? ?] | [? ?]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#prepend_inj"><span class="id" title="lemma">prepend_inj</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">post</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">post</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bk</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#prepend_inj"><span class="id" title="lemma">prepend_inj</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">post</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">pre0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt0</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">qt</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">qt0</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">pre0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bk</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_BEFORE_SET_NEXT&acute;"><span class="id" title="lemma">other_threads_preserve_BEFORE_SET_NEXT&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">j</span> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">H</span> : <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre0</span> [<span class="id" title="var">s0</span> [<span class="id" title="var">bj0</span> [<span class="id" title="var">bi0</span> [<span class="id" title="var">post0</span> <span class="id" title="var">Heq</span>]]]]]<br/>
    <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre0</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">pre0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">post0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bound</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">Hfunctional</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_BEFORE_SET_NEXT&acute;&acute;"><span class="id" title="lemma">other_threads_preserve_BEFORE_SET_NEXT&acute;&acute;</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfunctional</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre0</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">pre0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">q0</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">pre0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre0</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q0</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">pre0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">pre0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">bi0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Peano.html#gt"><span class="id" title="definition">gt</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">k</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre0</span>; [ |<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre0</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_BEFORE_SET_NEXT"><span class="id" title="lemma">other_threads_preserve_BEFORE_SET_NEXT</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">j</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">q&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_inv_cons"><span class="id" title="lemma">Q_CalMCSLock_inv_cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q0</span> <span class="id" title="var">H_q0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_BEFORE_SET_NEXT&acute;"><span class="id" title="lemma">other_threads_preserve_BEFORE_SET_NEXT&acute;</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span>:=<span class="id" title="var">e</span>) (<span class="id" title="var">k</span>:=<span class="id" title="var">k</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><span class="id" title="var">l</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">with</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">auto</span>. }            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_Not_In&acute;"><span class="id" title="lemma">other_threads_preserve_Not_In&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">H</span> : <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_before_set_next"><span class="id" title="definition">thread_before_set_next</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre</span> [<span class="id" title="var">s</span> [<span class="id" title="var">post</span> <span class="id" title="var">Heq</span>]]]<br/>
        <span class="id" title="keyword">end</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">progress</span>  (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> × || <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">in_app</span> <span class="id" title="keyword">in</span> *); <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_Not_In"><span class="id" title="lemma">other_threads_preserve_Not_In</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_multistep"><span class="id" title="lemma">other_threads_multistep</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">P</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>)) (<span class="id" title="var">i</span>:=<span class="id" title="var">i</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">l&acute;</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_Not_In&acute;"><span class="id" title="lemma">other_threads_preserve_Not_In&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="BEFORE_SET_NEXT_is_slow&acute;"><span class="id" title="lemma">BEFORE_SET_NEXT_is_slow&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> (<span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>: <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>  (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>  (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">j</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet_gso"><span class="id" title="lemma">ZSet_gso</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHq</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="BEFORE_SET_NEXT_is_slow"><span class="id" title="lemma">BEFORE_SET_NEXT_is_slow</span></a> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">pre</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> ((<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>))) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>  (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> ((<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>))) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pre</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))) <span class="id" title="tactic">by</span> (<span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#BEFORE_SET_NEXT_is_slow&acute;"><span class="id" title="lemma">BEFORE_SET_NEXT_is_slow&acute;</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet_gss"><span class="id" title="lemma">ZSet_gss</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="QState_of_QMCSLockState_SET_NEXT_queue"><span class="id" title="lemma">QState_of_QMCSLockState_SET_NEXT_queue</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">pre</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="QState_of_QMCSLockState_SET_NEXT_bounds"><span class="id" title="lemma">QState_of_QMCSLockState_SET_NEXT_bounds</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">pre</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_bound"><span class="id" title="definition">qthread_bound</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_bound"><span class="id" title="definition">qthread_bound</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="QState_of_QMCSLockState_SET_NEXT_head_status"><span class="id" title="lemma">QState_of_QMCSLockState_SET_NEXT_head_status</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">pre</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#head_status_of_QMCSLockState"><span class="id" title="definition">head_status_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#head_status_of_QMCSLockState"><span class="id" title="definition">head_status_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slowset_queue_subset"><span class="id" title="lemma">slowset_queue_subset</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.In"><span class="id" title="definition">ZSet.In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [ | [ [ | | ] ? ? ]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">solve_zset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="QState_of_QMCSLockState_SET_NEXT_slowset&acute;"><span class="id" title="lemma">QState_of_QMCSLockState_SET_NEXT_slowset&acute;</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">pre</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.remove"><span class="id" title="definition">ZSet.remove</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pre</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_of_QMCSLockState_app"><span class="id" title="lemma">slowset_of_QMCSLockState_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.eq_leibniz"><span class="id" title="lemma">ZSet.eq_leibniz</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.remove_spec"><span class="id" title="lemma">ZSet.remove_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.union_spec"><span class="id" title="lemma">ZSet.union_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.add_spec"><span class="id" title="lemma">ZSet.add_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ND</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">ND</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">ND</span> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_queue_subset"><span class="id" title="lemma">slowset_queue_subset</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.layerlib.ListLemma2.html#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">ND</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ND</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">ND</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_queue_subset"><span class="id" title="lemma">slowset_queue_subset</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">ND</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="QState_of_QMCSLockState_SET_NEXT_slowset"><span class="id" title="lemma">QState_of_QMCSLockState_SET_NEXT_slowset</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">pre</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">post</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> ((<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.remove"><span class="id" title="definition">ZSet.remove</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>  (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a>                <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pre"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#post"><span class="id" title="variable">post</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<span class="id" title="var">pre</span>  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">post</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#QState_of_QMCSLockState_SET_NEXT_slowset&acute;"><span class="id" title="lemma">QState_of_QMCSLockState_SET_NEXT_slowset&acute;</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slowset_BEFORE_SET_NEXT"><span class="id" title="lemma">slowset_BEFORE_SET_NEXT</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.add"><span class="id" title="definition">ZSet.add</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_of_QMCSLockState_app"><span class="id" title="lemma">slowset_of_QMCSLockState_app</span></a>. <span class="id" title="var">solve_zset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slowset_of_QMCSLockState_SET_NEXT_false"><span class="id" title="lemma">slowset_of_QMCSLockState_SET_NEXT_false</span></a>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">q0</span> <span class="id" title="var">s</span> <span class="id" title="var">old_tail</span> <span class="id" title="var">b_old_tail</span> <span class="id" title="var">curid</span> <span class="id" title="var">b_curid</span> <span class="id" title="var">qpost</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#old_tail"><span class="id" title="variable">old_tail</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b_old_tail"><span class="id" title="variable">b_old_tail</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#curid"><span class="id" title="variable">curid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b_curid"><span class="id" title="variable">b_curid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#qpost"><span class="id" title="variable">qpost</span></a>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#curid"><span class="id" title="variable">curid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#old_tail"><span class="id" title="variable">old_tail</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b_old_tail"><span class="id" title="variable">b_old_tail</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#curid"><span class="id" title="variable">curid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b_curid"><span class="id" title="variable">b_curid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#qpost"><span class="id" title="variable">qpost</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Rewrite</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_of_QMCSLockState_app"><span class="id" title="lemma">slowset_of_QMCSLockState_app</span></a> : <span class="id" title="var">zset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">curid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_zset</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.In"><span class="id" title="definition">ZSet.In</span></a> <span class="id" title="var">_</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_queue_subset"><span class="id" title="lemma">slowset_queue_subset</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.In"><span class="id" title="definition">ZSet.In</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">match</span> ?<span class="id" title="var">s</span> <span class="id" title="keyword">with</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> ⇒ <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|    <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>) |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="var">solve_zset</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <span class="id" title="var">i</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a> → <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">bi</span> <span class="id" title="var">q0</span>, <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CalLock_thread_has_lock"><span class="id" title="lemma">CalLock_thread_has_lock</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">i</span> <span class="id" title="var">queue</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#head_status_of_QMCSLockState"><span class="id" title="definition">head_status_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LHOLD"><span class="id" title="constructor">LHOLD</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#queue"><span class="id" title="variable">queue</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> <span class="id" title="var">i</span> <span class="id" title="var">queue</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">qt</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">compute</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">qt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_thread_has_lock&acute;"><span class="id" title="lemma">other_threads_preserve_thread_has_lock&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>      →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">H</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HCal&acute;</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">qt</span> <span class="id" title="var">pre</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">replace</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">qt</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK"><span class="id" title="constructor">THREAD_HAS_LOCK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_thread_has_lock"><span class="id" title="lemma">other_threads_preserve_thread_has_lock</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>      →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock"><span class="id" title="inductive">thread_has_lock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_multistep"><span class="id" title="lemma">other_threads_multistep</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<span class="id" title="var">i</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">l&acute;</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_thread_has_lock&acute;"><span class="id" title="lemma">other_threads_preserve_thread_has_lock&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a> → <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="THREAD_HAS_LOCK_NEXT"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">bi</span> <span class="id" title="var">s</span> <span class="id" title="var">bj</span> <span class="id" title="var">q0</span>, <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="var">j</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_thread_has_lock_next&acute;"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>      →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">H</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HCal&acute;</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">p1</span> [ | <span class="id" title="var">p2</span> <span class="id" title="var">pre&acute;</span>]]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">replace</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">k</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">p1</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">j0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">p1</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">p2</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_thread_has_lock_next"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_multistep"><span class="id" title="lemma">other_threads_multistep</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<span class="id" title="var">i</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">l&acute;</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_thread_has_lock_next&acute;"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_MCSLockState"><span class="id" title="definition">Q_MCSLockState</span></a> → <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="THREAD_HAS_LOCK_NEXT_FAST"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT_FAST</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">bi</span> <span class="id" title="var">bj</span> <span class="id" title="var">q0</span>, <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bj"><span class="id" title="variable">bj</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_thread_has_lock_next_fast&acute;"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next_fast&acute;</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>      →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">H</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HCal&acute;</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">Ha</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span>, <span class="id" title="var">Hb</span> : <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> ?<span class="id" title="var">l</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfunctional</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT_FAST"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT_FAST</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">p1</span> [ | <span class="id" title="var">p2</span> <span class="id" title="var">pre&acute;</span>]]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">replace</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">k</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT_FAST"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT_FAST</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">p1</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j0</span> <span class="id" title="var">bj</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT_FAST"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT_FAST</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">p1</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">p2</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT_FAST"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT_FAST</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_thread_has_lock_next_fast"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next_fast</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">q&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>       <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>  → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l&acute;"><span class="id" title="variable">l&acute;</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_multistep"><span class="id" title="lemma">other_threads_multistep</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span>:=<span class="id" title="var">i</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">l&acute;</span>:=<span class="id" title="var">l&acute;</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_thread_has_lock_next_fast&acute;"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next_fast&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="not_in_slowset"><span class="id" title="lemma">not_in_slowset</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">q</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) → <a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet_mem_spec_false"><span class="id" title="lemma">ZSet_mem_spec_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slowset_queue_subset"><span class="id" title="lemma">slowset_queue_subset</span></a> <span class="id" title="var">i</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_rel_c_onestep"><span class="id" title="lemma">other_threads_preserve_rel_c_onestep</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">j</span> <span class="id" title="var">e</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">i</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span>  <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c&acute;"><span class="id" title="variable">self_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b&acute;"><span class="id" title="variable">b&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow&acute;"><span class="id" title="variable">slow&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq&acute;"><span class="id" title="variable">tq&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">q0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">tq&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal</span>  <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HCal</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HCal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> | <span class="id" title="var">e</span> ]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">_</span> | (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">if</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> (<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>;  <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_rel_c&acute;"><span class="id" title="lemma">other_threads_preserve_rel_c&acute;</span></a> :  <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c0</span> <span class="id" title="var">rel_c0</span> <span class="id" title="var">b0</span> <span class="id" title="var">q0</span> <span class="id" title="var">slow0</span> <span class="id" title="var">tq0</span> <span class="id" title="var">ll1</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>              <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c0"><span class="id" title="variable">self_c0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c0"><span class="id" title="variable">rel_c0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b0"><span class="id" title="variable">b0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow0"><span class="id" title="variable">slow0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq0"><span class="id" title="variable">tq0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll1"><span class="id" title="variable">ll1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll1"><span class="id" title="variable">ll1</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">qtail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c0"><span class="id" title="variable">rel_c0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#qtail"><span class="id" title="variable">qtail</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ll1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">e</span> <span class="id" title="var">ll1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">q0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">tq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal0</span> <span class="id" title="var">HCal</span> <span class="id" title="var">Hdomain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.CalMCSLockLemmas.html#QS_CalLock_inv"><span class="id" title="lemma">QS_CalLock_inv</span></a> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HCal</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c&acute;</span> [<span class="id" title="var">rel_c&acute;</span> [<span class="id" title="var">b&acute;</span> [<span class="id" title="var">q&acute;</span> [<span class="id" title="var">slow&acute;</span> [<span class="id" title="var">tq&acute;</span> <span class="id" title="var">HCal&acute;</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHll1</span> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span> <span class="id" title="var">HCal0</span> <span class="id" title="var">HCal&acute;</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">qtail1</span> [ <span class="id" title="var">Hrel_c&acute;</span> <span class="id" title="var">Hq&acute;</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">k1</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">Hdomain</span> <span class="id" title="keyword">with</span> <span class="id" title="var">k1</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. }            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq&acute;</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hik</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">specialize</span> <span class="id" title="var">Hdomain</span> <span class="id" title="keyword">with</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_rel_c_onestep"><span class="id" title="lemma">other_threads_preserve_rel_c_onestep</span></a> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">HCal</span> <span class="id" title="var">Hik</span>) <span class="id" title="keyword">as</span> [ <span class="id" title="var">q0&acute;&acute;</span> [<span class="id" title="var">Hrel_c&acute;&acute;</span> <span class="id" title="var">Hq&acute;&acute;</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">q0&acute;&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_rel_c"><span class="id" title="lemma">other_threads_preserve_rel_c</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">lo</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>              <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#lo"><span class="id" title="variable">lo</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c&acute;"><span class="id" title="variable">self_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b&acute;"><span class="id" title="variable">b&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow&acute;"><span class="id" title="variable">slow&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq&acute;"><span class="id" title="variable">tq&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#lo"><span class="id" title="variable">lo</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">tq&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal1</span> <span class="id" title="var">Hvalid_domain</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">ll1</span> := <span class="id" title="var">lo</span> <span class="id" title="var">i</span> <span class="id" title="var">ll</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">ll1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <span class="id" title="var">ll1</span> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hvalid_domain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ll1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid_domain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_rel_c&acute;"><span class="id" title="lemma">other_threads_preserve_rel_c&acute;</span></a> <span class="id" title="var">i</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> <span class="id" title="var">ll1</span> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> (<span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">q&acute;</span>) <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">qtail</span> [? ?]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_FreeToPull_onestep"><span class="id" title="lemma">other_threads_preserve_FreeToPull_onestep</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">j</span> <span class="id" title="var">e</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">i</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span>  <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c&acute;"><span class="id" title="variable">self_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b&acute;"><span class="id" title="variable">b&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow&acute;"><span class="id" title="variable">slow&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq&acute;"><span class="id" title="variable">tq&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> → <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">q0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">tq&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HCal</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HCal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> | <span class="id" title="var">e</span> ]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">_</span> | (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">if</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> (<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>;  <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_FreeToPull&acute;"><span class="id" title="lemma">other_threads_preserve_FreeToPull&acute;</span></a> :  <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c0</span> <span class="id" title="var">rel_c0</span> <span class="id" title="var">b0</span> <span class="id" title="var">q0</span> <span class="id" title="var">slow0</span> <span class="id" title="var">tq0</span> <span class="id" title="var">ll1</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>              <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c0"><span class="id" title="variable">self_c0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c0"><span class="id" title="variable">rel_c0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b0"><span class="id" title="variable">b0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0"><span class="id" title="variable">q0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow0"><span class="id" title="variable">slow0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq0"><span class="id" title="variable">tq0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll1"><span class="id" title="variable">ll1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll1"><span class="id" title="variable">ll1</span></a> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">qtail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll1"><span class="id" title="variable">ll1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#qtail"><span class="id" title="variable">qtail</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ll1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">e</span> <span class="id" title="var">ll1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">q0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">tq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal0</span> <span class="id" title="var">HCal</span> <span class="id" title="var">Hvalid</span>  <span class="id" title="var">Hdomain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.CalMCSLockLemmas.html#QS_CalLock_inv"><span class="id" title="lemma">QS_CalLock_inv</span></a> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HCal</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c&acute;</span> [<span class="id" title="var">rel_c&acute;</span> [<span class="id" title="var">b&acute;</span> [<span class="id" title="var">q&acute;</span> [<span class="id" title="var">slow&acute;</span> [<span class="id" title="var">tq&acute;</span> <span class="id" title="var">HCal&acute;</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHll1</span> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span> <span class="id" title="var">HCal0</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">Hvalid</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">qtail1</span> [ <span class="id" title="var">Hvalid&acute;</span> <span class="id" title="var">Hq&acute;</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">k1</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">Hdomain</span> <span class="id" title="keyword">with</span> <span class="id" title="var">k1</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. }            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq&acute;</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> <span class="id" title="var">e</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hik</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">specialize</span> <span class="id" title="var">Hdomain</span> <span class="id" title="keyword">with</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_FreeToPull_onestep"><span class="id" title="lemma">other_threads_preserve_FreeToPull_onestep</span></a> <span class="id" title="var">k</span> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HCal&acute;</span> <span class="id" title="var">HCal</span> <span class="id" title="var">Hvalid&acute;</span> <span class="id" title="var">Hik</span>) <span class="id" title="keyword">as</span> [ <span class="id" title="var">q0&acute;&acute;</span> [<span class="id" title="var">Hvalid&acute;&acute;</span> <span class="id" title="var">Hq&acute;&acute;</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">q0&acute;&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="other_threads_preserve_FreeToPull"><span class="id" title="lemma">other_threads_preserve_FreeToPull</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">lo</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>              <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c"><span class="id" title="variable">self_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c"><span class="id" title="variable">rel_c</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow"><span class="id" title="variable">slow</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#lo"><span class="id" title="variable">lo</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c&acute;"><span class="id" title="variable">self_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#b&acute;"><span class="id" title="variable">b&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow&acute;"><span class="id" title="variable">slow&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq&acute;"><span class="id" title="variable">tq&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#lo"><span class="id" title="variable">lo</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#lo"><span class="id" title="variable">lo</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ll"><span class="id" title="variable">ll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">tq&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HCal</span> <span class="id" title="var">HCal1</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">Hvalid_domain</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">ll1</span> := <span class="id" title="var">lo</span> <span class="id" title="var">i</span> <span class="id" title="var">ll</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">ll1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCal1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#e"><span class="id" title="variable">e</span></a>) <span class="id" title="var">ll1</span> → <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#k"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hvalid_domain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ll1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid_domain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_FreeToPull&acute;"><span class="id" title="lemma">other_threads_preserve_FreeToPull&acute;</span></a> <span class="id" title="var">i</span> <span class="id" title="var">ll</span> <span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">q</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> <span class="id" title="var">ll1</span> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">b&acute;</span> (<span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">q&acute;</span>) <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">qtail</span> [? ?]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="pass_lock_final1"><span class="id" title="definition">pass_lock_final1</span></a> <span class="id" title="var">l</span> <span class="id" title="var">cpu</span> <span class="id" title="var">o</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l1</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#cpu"><span class="id" title="variable">cpu</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#cpu"><span class="id" title="variable">cpu</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l1"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l1"><span class="id" title="variable">l1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="pass_lock_final"><span class="id" title="definition">pass_lock_final</span></a> <span class="id" title="var">l</span> <span class="id" title="var">cpu</span> <span class="id" title="var">o</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l1</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#cpu"><span class="id" title="variable">cpu</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#cpu"><span class="id" title="variable">cpu</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#SET_BUSY"><span class="id" title="constructor">SET_BUSY</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final1"><span class="id" title="definition">pass_lock_final1</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#cpu"><span class="id" title="variable">cpu</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="pass_lock_CalWaitRel"><span class="id" title="lemma">pass_lock_CalWaitRel</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">o</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#valid_multi_oracle_domain"><span class="id" title="definition">valid_multi_oracle_domain</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_mcs_qs_oracle"><span class="id" title="inductive">relate_mcs_qs_oracle</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span>  <span class="id" title="var">n</span> <span class="id" title="var">hl</span> <span class="id" title="var">hl&acute;</span> <span class="id" title="var">q</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitRel"><span class="id" title="definition">QS_CalWaitRel</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCS_RelWait"><span class="id" title="definition">CalMCS_RelWait</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl"><span class="id" title="variable">hl</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final"><span class="id" title="definition">pass_lock_final</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final"><span class="id" title="definition">pass_lock_final</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">self_c&acute;</span> <span class="id" title="var">rel_c&acute;</span> <span class="id" title="var">q0&acute;</span> <span class="id" title="var">q&acute;</span> <span class="id" title="var">slow&acute;</span> <span class="id" title="var">tq&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final1"><span class="id" title="definition">pass_lock_final1</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#self_c&acute;"><span class="id" title="variable">self_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#rel_c&acute;"><span class="id" title="variable">rel_c&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q0&acute;"><span class="id" title="variable">q0&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q&acute;"><span class="id" title="variable">q&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#slow&acute;"><span class="id" title="variable">slow&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq&acute;"><span class="id" title="variable">tq&acute;</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#correct_qslock_status"><span class="id" title="definition">correct_qslock_status</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final"><span class="id" title="definition">pass_lock_final</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a>) <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LockFalse"><span class="id" title="constructor">LockFalse</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final"><span class="id" title="definition">pass_lock_final</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#hl&acute;"><span class="id" title="variable">hl&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#o"><span class="id" title="variable">o</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitRel"><span class="id" title="definition">QS_CalWaitRel</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCS_RelWait"><span class="id" title="definition">CalMCS_RelWait</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">o</span> <span class="id" title="var">H_valid_oracle</span> <span class="id" title="var">H_relate_oracle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span> <span class="id" title="var">hl&acute;</span> <span class="id" title="var">q</span> <span class="id" title="var">H_CalMCS</span> <span class="id" title="var">H_CalWaitRel</span> <span class="id" title="var">H_relate_log</span> <span class="id" title="var">H_has_lock_next</span> <span class="id" title="var">H_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_relate_oracle</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">hl1</span> := <span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">hl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> <span class="id" title="var">hl1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_relate_log1</span> <span class="id" title="tactic">by</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <span class="id" title="var">Hrelate_mcs_qs_oracle_res</span>; <span class="id" title="tactic">auto</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_relate_log1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q1</span> <span class="id" title="var">H_QCalMCS1</span> <span class="id" title="var">HQCal1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next"><span class="id" title="inductive">thread_has_lock_next</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">q1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_has_lock_next1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_thread_has_lock_next"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">hl</span>) (<span class="id" title="var">l&acute;</span>:= <span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span>) (<span class="id" title="var">q</span>:=<span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H_QCalMCS1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H_valid_oracle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <span class="id" title="var">hl1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_valid1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHn</span> <span class="id" title="var">Hrelate_mcs_qs_oracle_res</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_relate_log</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q0</span> <span class="id" title="var">H_CalMCS0</span> <span class="id" title="var">HQCal0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">q0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">q</span> <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_functional"><span class="id" title="lemma">Q_CalMCSLock_functional</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">q0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HQCal0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c</span> <span class="id" title="var">rel_c</span> <span class="id" title="var">b</span> <span class="id" title="var">qs</span> <span class="id" title="var">slow</span> <span class="id" title="var">tq</span> <span class="id" title="var">Hb</span> <span class="id" title="var">Hqs</span> <span class="id" title="var">Hslow</span>  <span class="id" title="var">Htq</span> <span class="id" title="var">HQCal_inv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_has_lock_next</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>

<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HQCal1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c1</span> <span class="id" title="var">rel_c1</span> <span class="id" title="var">b1</span> <span class="id" title="var">qs1</span> <span class="id" title="var">slow1</span> <span class="id" title="var">tq1</span> <span class="id" title="var">Hb1</span> <span class="id" title="var">Hqs1</span> <span class="id" title="var">Hslow1</span>  <span class="id" title="var">Htq1</span> <span class="id" title="var">HQCal1_inv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal1_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_has_lock_next1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_FreeToPull"><span class="id" title="lemma">other_threads_preserve_FreeToPull</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal_inv</span> <span class="id" title="var">HQCal1_inv</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">hl</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">hl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitRel"><span class="id" title="definition">QS_CalWaitRel</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">o</span> <span class="id" title="var">i</span> <span class="id" title="var">hl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">hl</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">hl1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">hl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">hl</span> <span class="id" title="var">q</span> <span class="id" title="var">H_CalMCS</span> <span class="id" title="var">H_relate_log</span> <span class="id" title="var">H_has_lock_next</span> <span class="id" title="var">H_valid</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HQCal1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c1</span> <span class="id" title="var">rel_c1</span> <span class="id" title="var">b1</span> <span class="id" title="var">qs1</span> <span class="id" title="var">slow1</span> <span class="id" title="var">tq1</span> <span class="id" title="var">Hb1</span> <span class="id" title="var">Hqs1</span> <span class="id" title="var">Hslow1</span> <span class="id" title="var">Htq1</span> <span class="id" title="var">HQCal1_inv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal1_inv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_completeness"><span class="id" title="lemma">Q_CalMCSLock_completeness</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_QCalMCS1</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">t1</span> <span class="id" title="var">la1</span>] <span class="id" title="var">H_CalMCS1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_CalMCS1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_has_lock_next1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bi</span> <span class="id" title="var">s</span> <span class="id" title="var">bj</span> <span class="id" title="var">q1_tail</span> <span class="id" title="var">H_q1_tail</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">q1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_next_correct</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_next_correct"><span class="id" title="lemma">Q_CalMCSLock_next_correct</span></a>  <span class="id" title="var">hl1</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>) <span class="id" title="var">H_QCalMCS1</span> <span class="id" title="var">t1</span> <span class="id" title="var">la1</span> <span class="id" title="var">bounds</span> <span class="id" title="var">H_CalMCS1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_next_correct</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_next_correct</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_next_correct</span> <span class="id" title="var">_</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">busy</span> <span class="id" title="var">next</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">next</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_next</span> | <span class="id" title="var">H_next</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_next_correct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>))  <span class="id" title="keyword">as</span> <span class="id" title="var">HIn</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">HIn&acute;</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.layerlib.ListLemma2.html#In_map"><span class="id" title="lemma">In_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HIn</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_j_not_null</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_not_NULL"><span class="id" title="lemma">Q_CalMCSLock_not_NULL</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_QCalMCS1</span> <span class="id" title="var">HIn&acute;</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hslow1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="mcertikos.clib.ZSet.html#ZSet_gss"><span class="id" title="lemma">ZSet_gss</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitRel"><span class="id" title="definition">QS_CalWaitRel</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <span class="id" title="var">j</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q1_tail</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_j_not_in_slowset</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#not_in_slowset"><span class="id" title="lemma">not_in_slowset</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_QCalMCS1</span>; <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">j</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">hl</span>:=(<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">q</span>:= (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock_GET_NEXT"><span class="id" title="constructor">Q_CalMCSLock_GET_NEXT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">rel_c1</span> <span class="id" title="keyword">as</span> [|?]; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#RELATE_QS_MCS_LOG"><span class="id" title="constructor">RELATE_QS_MCS_LOG</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">q</span>:= (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_BEFORE_SET_NEXT"><span class="id" title="constructor">MCS_BEFORE_SET_NEXT</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock_GET_NEXT"><span class="id" title="constructor">Q_CalMCSLock_GET_NEXT</span></a>; <span class="id" title="tactic">assumption</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalWaitRel"><span class="id" title="definition">QS_CalWaitRel</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">rel_c1</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">rel_c1&acute;</span>]; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span>]; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<span class="id" title="var">o</span> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[[[[[<span class="id" title="var">self_c01</span> <span class="id" title="var">rel_c01</span>] <span class="id" title="var">b01</span>] <span class="id" title="var">q01</span>] <span class="id" title="var">slow01</span>] <span class="id" title="var">tq01</span>] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">H01</span>; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.mcslock.CalMCSLockLemmas.html#QS_CalLock_inv_app"><span class="id" title="lemma">QS_CalLock_inv_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H01</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">self_c02</span> [<span class="id" title="var">rel_c02</span> [<span class="id" title="var">b02</span> [<span class="id" title="var">q02</span> [<span class="id" title="var">slow02</span> [<span class="id" title="var">tq02</span> <span class="id" title="var">H02</span>]]]]]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H02</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H02</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H02</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H02</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H02</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tq1</span> <span class="id" title="keyword">as</span> [ | ? ?]; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">zeq</span> <span class="id" title="var">i</span> <span class="id" title="var">i</span>); [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H02</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H02</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hslow1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Htq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QSTATE_OF_QMCSLOCKSTATE"><span class="id" title="constructor">QSTATE_OF_QMCSLOCKSTATE</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="keyword">Transparent</span> <a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_valid1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">elimtype</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_tail_not_INSIDE"><span class="id" title="lemma">Q_CalMCSLock_tail_not_INSIDE</span></a> <span class="id" title="var">_</span> <span class="id" title="var">j</span> <span class="id" title="var">bj</span> <span class="id" title="var">_</span> <span class="id" title="var">H_QCalMCS1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <span class="id" title="var">j</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q1_tail</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_j_not_in_slowset</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#not_in_slowset"><span class="id" title="lemma">not_in_slowset</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_QCalMCS1</span>; <span class="id" title="var">use_NoDup&acute;</span> <span class="id" title="var">j</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hslow1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_j_not_in_slowset</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">hl2</span> := <span class="id" title="var">o</span> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">hl2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_CalWaitRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">hl2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">rel_c1</span>  <span class="id" title="keyword">as</span> [|<span class="id" title="var">rel_c1&acute;</span>] ; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">rel_c1&acute;</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">rel_c1&acute;&acute;</span>] ; [<span class="id" title="tactic">congruence</span>|].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> <span class="id" title="var">hl2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrelate_log2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hrelate_mcs_qs_oracle_res</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#RELATE_QS_MCS_LOG"><span class="id" title="constructor">RELATE_QS_MCS_LOG</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">q</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q1_tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+  <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tq1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#QS_CalLock_q_nil_same"><span class="id" title="lemma">QS_CalLock_q_nil_same</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal1_inv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tq1</span> <span class="id" title="keyword">as</span> [| ? ?]; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QSTATE_OF_QMCSLOCKSTATE"><span class="id" title="constructor">QSTATE_OF_QMCSLOCKSTATE</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrelate_log2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q2</span> <span class="id" title="var">H_QCalMCS2</span>  <span class="id" title="var">H_QCal2</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_has_lock_next2</span> : <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#thread_has_lock_next_fast"><span class="id" title="inductive">thread_has_lock_next_fast</span></a> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">q2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_thread_has_lock_next_fast"><span class="id" title="lemma">other_threads_preserve_thread_has_lock_next_fast</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:= (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">l&acute;</span>:= <span class="id" title="var">o</span> <span class="id" title="var">i</span> ((<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">q</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_INSIDE"><span class="id" title="constructor">MCS_INSIDE</span></a> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)::</span></a><span class="id" title="var">q1_tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H_QCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#THREAD_HAS_LOCK_NEXT_FAST"><span class="id" title="constructor">THREAD_HAS_LOCK_NEXT_FAST</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H_valid_oracle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_has_lock_next2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bi&acute;</span> <span class="id" title="var">bj&acute;</span> <span class="id" title="var">q2_tail</span> <span class="id" title="var">Hq2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.clib.ZSet.html#ZSet.mem"><span class="id" title="definition">ZSet.mem</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q2_tail</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_i_not_in_slowset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#not_in_slowset"><span class="id" title="lemma">not_in_slowset</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H_QCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_QCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.LogReplay.html#CalValidBit"><span class="id" title="definition">CalValidBit</span></a> <span class="id" title="var">hl2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="mcertikos.objects.LogReplay.html#FreeToPull"><span class="id" title="constructor">FreeToPull</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_valid2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_QCal2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c2</span> <span class="id" title="var">rel_c2</span> <span class="id" title="var">b2</span> <span class="id" title="var">qs2</span> <span class="id" title="var">slow2</span> <span class="id" title="var">tq2</span> <span class="id" title="var">Hb2</span> <span class="id" title="var">Hqs2</span> <span class="id" title="var">Hslow2</span> <span class="id" title="var">Htq2</span> <span class="id" title="var">HQCal2_inv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal2_inv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal2_inv</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal2_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal1_inv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HQCal1_inv&acute;</span> : <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> ((<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">self_c1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">rel_c1&acute;&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LHOLD"><span class="id" title="constructor">LHOLD</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">bj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_bound"><span class="id" title="definition">qthread_bound</span></a> <span class="id" title="var">q1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_FreeToPull"><span class="id" title="lemma">other_threads_preserve_FreeToPull</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal1_inv&acute;</span> <span class="id" title="var">HQCal2_inv</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_valid1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_QCal2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">self_c2</span> <span class="id" title="var">rel_c2</span> <span class="id" title="var">b2</span> <span class="id" title="var">qs2</span> <span class="id" title="var">slow2</span> <span class="id" title="var">tq2</span> <span class="id" title="var">Hb2</span> <span class="id" title="var">Hqs2</span> <span class="id" title="var">Hslow2</span> <span class="id" title="var">Htq2</span> <span class="id" title="var">HQCal2_inv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal2_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tq2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">tq2</span>; [<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span> | <span class="id" title="tactic">discriminate</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tq2</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">t</span> <span class="id" title="var">tq&acute;</span>]; [<span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#SET_BUSY"><span class="id" title="constructor">SET_BUSY</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl2</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>0%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> 0%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LEMPTY"><span class="id" title="constructor">LEMPTY</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q2_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q2_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">tq&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">HQCal3_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal2_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb2</span>. <span class="id" title="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">rel_c2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">rel_c1&acute;&acute;</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H_rel_c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">hl2</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal1_inv</span>, <span class="id" title="var">HQCal2_inv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>  (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#GET_NEXT"><span class="id" title="constructor">GET_NEXT</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">self_c1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">rel_c1&acute;&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#LHOLD"><span class="id" title="constructor">LHOLD</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#slowset_of_QMCSLockState"><span class="id" title="definition">slowset_of_QMCSLockState</span></a> <span class="id" title="var">q1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">bi</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">bj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_bound"><span class="id" title="definition">qthread_bound</span></a> <span class="id" title="var">q1_tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">HQCal1_inv&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal1_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#other_threads_preserve_rel_c"><span class="id" title="lemma">other_threads_preserve_rel_c</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal1_inv&acute;</span> <span class="id" title="var">HQCal2_inv</span> <span class="id" title="var">H_valid_oracle</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_rel_c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hslow2</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_i_not_in_slowset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#relate_qs_mcs_log"><span class="id" title="inductive">relate_qs_mcs_log</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#SET_BUSY"><span class="id" title="constructor">SET_BUSY</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">hl2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#RELATE_QS_MCS_LOG"><span class="id" title="constructor">RELATE_QS_MCS_LOG</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">q</span> :=  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#MCS_WAITING_BUSY"><span class="id" title="constructor">MCS_WAITING_BUSY</span></a> <span class="id" title="var">j</span> <span class="id" title="var">bj&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q2_tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+  <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal3_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QSTATE_OF_QMCSLOCKSTATE"><span class="id" title="constructor">QSTATE_OF_QMCSLOCKSTATE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Htq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">hl&acute;</span> <span class="id" title="keyword">with</span> <span class="id" title="var">hl1</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcalmcs</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">tail&acute;</span> <span class="id" title="var">la&acute;</span> <span class="id" title="var">bnd&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <span class="id" title="var">hl2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tail&acute;"><span class="id" title="variable">tail&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la&acute;"><span class="id" title="variable">la&acute;</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bnd&acute;"><span class="id" title="variable">bnd&acute;</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la&acute;"><span class="id" title="variable">la&acute;</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_completeness"><span class="id" title="lemma">Q_CalMCSLock_completeness</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_QCalMCS2</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">mcs&acute;</span>, <span class="id" title="var">mcs_exists</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">mcs&acute;</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">tail&acute;</span>  &amp; <span class="id" title="var">ndpool&acute;</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">mcs_exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hnext_correct</span> := <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_next_correct"><span class="id" title="lemma">Q_CalMCSLock_next_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_QCalMCS2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">mcs_exists</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnext_correct</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnext_correct</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnext_correct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcalmcs</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">tail&acute;</span> &amp; <span class="id" title="var">la&acute;</span> &amp; <span class="id" title="var">bnd&acute;</span> &amp; <span class="id" title="var">Hcalmcs1</span> &amp; <span class="id" title="var">HCalmcs2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcalmcs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="definition">ZMap.get</span> <span class="id" title="var">i</span> <span class="id" title="var">la&acute;</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ndv&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ndv&acute;</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HCalmcs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">zeq_false</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final"><span class="id" title="definition">pass_lock_final</span></a>, <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#pass_lock_final1"><span class="id" title="definition">pass_lock_final1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">hl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqs2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HQCal2_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">HQCal2_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#correct_qslock_status"><span class="id" title="definition">correct_qslock_status</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; [| <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQCal3_inv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hcal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">q</span> <span class="id" title="keyword">with</span> ( <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q2_tail</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">in</span>   <span class="id" title="var">H_QCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H_QCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_QCalMCS2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_valid2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Q_CalMCSLock_tail_AT_HEAD"><span class="id" title="lemma">Q_CalMCSLock_tail_AT_HEAD</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#Q_CalMCSLock"><span class="id" title="inductive">Q_CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bi"><span class="id" title="variable">bi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#CalMCSLock"><span class="id" title="definition">CalMCSLock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#MCSLOCK"><span class="id" title="constructor">MCSLOCK</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#la"><span class="id" title="variable">la</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tq"><span class="id" title="variable">tq</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span> <span class="id" title="var">q</span> <span class="id" title="var">HQCal</span> <span class="id" title="var">t</span> <span class="id" title="var">la</span> <span class="id" title="var">tq</span> <span class="id" title="var">HCal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">HNoDup</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_NoDup"><span class="id" title="lemma">Q_CalMCSLock_NoDup</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">q</span> :=  <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>); <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htail_sound</span> : <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#QT"><span class="id" title="constructor">QT</span></a> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">bi</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">q</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tail_soundness"><span class="id" title="lemma">tail_soundness</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="mcertikos.objects.CalMCSLock.html#NULL"><span class="id" title="definition">NULL</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#Q_CalMCSLock_not_NULL"><span class="id" title="lemma">Q_CalMCSLock_not_NULL</span></a>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HQCal</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <span class="id" title="var">q</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Htail_sound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htail_sound</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#qthread_tid"><span class="id" title="definition">qthread_tid</span></a> <span class="id" title="var">q</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> (<a class="idref" href="mcertikos.objects.cpulocaldef.QMCSLockOpGenDef.html#tail_id"><span class="id" title="definition">tail_id</span></a> <span class="id" title="var">q</span>) <span class="id" title="keyword">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#tail_id_In"><span class="id" title="lemma">tail_id_In</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoDup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="SWAP_TAIL_false_preserves_get_free_qslock"><span class="id" title="lemma">SWAP_TAIL_false_preserves_get_free_qslock</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">bound</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> → <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#SWAP_TAIL"><span class="id" title="constructor">SWAP_TAIL</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#bound"><span class="id" title="variable">bound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">bound</span> <span class="id" title="var">l</span> <span class="id" title="var">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hcal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">_</span> | (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">if</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [[[[[[? ?] ?] ?] ?] ?] | ] <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>  ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#MultiUndef"><span class="id" title="constructor">MultiUndef</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#MultiDef"><span class="id" title="constructor">MultiDef</span></a> <span class="id" title="var">_</span>  ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="var">subdestruct</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span> <span class="id" title="var">k</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hfree</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfree</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="SET_NEXT_preserves_get_free_qslock"><span class="id" title="lemma">SET_NEXT_preserves_get_free_qslock</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">ot</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a> → <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TEVENT"><span class="id" title="constructor">TEVENT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#TTICKET"><span class="id" title="constructor">TTICKET</span></a> (<a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#SET_NEXT"><span class="id" title="constructor">SET_NEXT</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#ot"><span class="id" title="variable">ot</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#l"><span class="id" title="variable">l</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#get_free_qslock"><span class="id" title="definition">get_free_qslock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">bound</span> <span class="id" title="var">l</span> <span class="id" title="var">Hfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hcal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">_</span> | (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">if</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> <a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="mcertikos.objects.CalMCSLock.html#QS_CalLock"><span class="id" title="definition">QS_CalLock</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [[[[[[? ?] ?] ?] ?] ?] | ] <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>  ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">HCal&acute;</span> : <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#MultiUndef"><span class="id" title="constructor">MultiUndef</span></a> ⇒ <span class="id" title="var">_</span> | <a class="idref" href="mcertikos.objects.cpulocaldef.GlobalOracle.html#MultiDef"><span class="id" title="constructor">MultiDef</span></a> <span class="id" title="var">_</span>  ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="var">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="var">subdestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfree</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">h</span> <span class="id" title="keyword">with</span> <span class="id" title="var">k</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hfree</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfree</span>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#QSMCSLAYERAUXLEMMA.WITH_WAIT_TIME"><span class="id" title="section">WITH_WAIT_TIME</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="mcertikos.mcslock.QMCSLockOpGenLemma.html#QSMCSLAYERAUXLEMMA"><span class="id" title="section">QSMCSLAYERAUXLEMMA</span></a>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>